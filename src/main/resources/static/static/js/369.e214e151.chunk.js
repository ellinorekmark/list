"use strict";(self.webpackChunklistig_react_ui=self.webpackChunklistig_react_ui||[]).push([[369],{6879:(e,t,s)=>{s.d(t,{A:()=>n});var i=s(9217);class n{constructor(){this.baseUrl=i.C1}async sendPost(e,t,s){const i=await fetch(this.baseUrl+e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+s},body:JSON.stringify(t)});if(!i.ok){console.log(await i.json());const e=await i.json();throw new Error(e)}return await i.json()}async sendPostNoLogin(e,t){const s=await fetch(this.baseUrl+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){const e=await s.json();throw new Error(e)}return await s.json()}async sendGet(e,t){const s=await fetch(this.baseUrl+e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Basic "+t}});if(!s.ok)throw new Error(await s.json());return await s.json()}async sendGetNoAuth(e){const t=await fetch(this.baseUrl+e,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(await t.json());return await t.json()}async sendDelete(e,t,s){const i=await fetch(this.baseUrl+e,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Basic "+s},body:JSON.stringify(t)});if(!i.ok)throw new Error(await i.json());return await i.json()}}},2475:(e,t,s)=>{s.d(t,{A:()=>u});s(5043);var i=s(5721),n=s(1322),r=s(3851),o=s(6446),l=s(8734),a=s(7392),d=s(4208),c=s(579);const u=e=>{let{uList:t}=e;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(i.A,{children:t.items.map((e=>(0,c.jsxs)(n.Ay,{sx:{cursor:"pointer",border:"1px solid ",borderColor:"primary.darker",marginTop:"5px",borderRadius:"5px"},children:[(0,c.jsx)(r.A,{children:(0,c.jsx)(o.A,{})}),(0,c.jsx)(l.A,{primary:e.item,primaryTypographyProps:{fontSize:"18px"}}),(0,c.jsx)(a.A,{edge:"end",children:(0,c.jsx)(d.A,{})})]},e.id)))})})}},8351:(e,t,s)=>{s.d(t,{A:()=>p});var i=s(5043),n=s(5721),r=s(1322),o=s(3851),l=s(6446),a=s(8734),d=s(7392),c=s(4208),u=s(6581),x=s(4109),h=s(9613),j=s(579);const p=e=>{let{uList:t,updateList:s}=e;const{user:p}=(0,i.useContext)(h.c),[m,g]=(0,i.useState)((()=>p.username===t.owner||t.editors.includes(p.username)));return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(n.A,{children:t.items.map((e=>{return(0,j.jsxs)(r.Ay,{sx:{cursor:"pointer",border:"1px solid ",borderColor:"primary.darker",marginTop:"5px",borderRadius:"5px"},onClick:()=>(e=>{if(m){const i=t.items.map((t=>t.id===e?{...t,itemStatus:"1"===t.itemStatus?"":"1"}:t));s({...t,items:i})}})(e.id),children:[(0,j.jsx)(o.A,{children:(0,j.jsx)(l.A,{children:(i=e.itemStatus,"1"===i?(0,j.jsx)(u.A,{sx:{color:"secondary.main"}}):(0,j.jsx)(x.A,{sx:{color:"secondary.main"}}))})}),(0,j.jsx)(a.A,{primary:e.item,primaryTypographyProps:{fontSize:"18px"}}),(0,j.jsx)(d.A,{edge:"end",children:(0,j.jsx)(c.A,{})})]},e.id);var i}))})})}},5704:(e,t,s)=>{s.d(t,{A:()=>o});s(5043);var i=s(6446),n=s(5865),r=s(579);const o=e=>{let{uList:t}=e;return(0,r.jsx)(r.Fragment,{children:(()=>{if(null!==t.listInfo.listDesc)return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i.A,{sx:{marginBottom:1,gridRow:"1",gridColumn:"1 / 2",m:1,paddingLeft:2,paddingRight:2},children:(0,r.jsxs)(n.A,{fontSize:"large",children:[t.listInfo.listDesc,(0,r.jsx)("br",{})]})})})})()})}},9007:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(5865),n=s(6446),r=(s(5043),s(579));const o=e=>{let{title:t}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(n.A,{sx:{paddingTop:2,paddingRight:5,paddingLeft:5},children:[(0,r.jsx)(i.A,{fontSize:"xx-large",sx:{fontFamily:"Garamond",color:"primary.main"},children:(0,r.jsx)("strong",{children:t})}),(0,r.jsx)("br",{})]})})}},6369:(e,t,s)=>{s.r(t),s.d(t,{default:()=>ae});var i=s(5043),n=s(835),r=s(6446),o=s(1637),l=s(5865),a=s(9613),d=s(5081),c=s.n(d),u=s(7285),x=s(6879),h=s(7392),j=s(7555),p=s(3531),m=s(5146),g=s(3193),f=s(9285),A=s(6990),w=s(3766),y=s(6605),v=s(710),b=s(1906),L=s(3471),C=s(579);const I=new x.A;function S(){return null}const k=e=>{let{list:t,updateCopy:s}=e;const{loginDetails:n}=(0,i.useContext)(a.c),[o,d]=(0,i.useState)(""),[c,u]=(0,i.useState)("VIEWER"),[x,j]=(0,i.useState)(!1),[p,k]=(0,i.useState)(""),E=t.editors||[],R=t.viewers||[],F=(e,i)=>{let n=[...E],r=[...R];"EDITOR"===i?(r=r.filter((t=>t!==e)),n.includes(e)||n.push(e)):"VIEWER"===i&&(n=n.filter((t=>t!==e)),r.includes(e)||r.push(e));const o={...t,editors:n,viewers:r};s(o)},P=e=>{const i={...t,editors:E.filter((t=>t!==e)),viewers:R.filter((t=>t!==e))};s(i)};return(0,C.jsxs)(C.Fragment,{children:[E.length>0||R.length>0?(0,C.jsxs)(C.Fragment,{children:[E.map(((e,t)=>(0,C.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",marginBottom:1},children:[(0,C.jsx)(l.A,{sx:{flexGrow:1,marginLeft:2},children:e}),(0,C.jsx)(g.A,{sx:{width:100,marginRight:2},children:(0,C.jsxs)(f.A,{value:"EDITOR",onChange:t=>F(e,t.target.value),children:[(0,C.jsx)(A.A,{value:"EDITOR",children:"Editor"}),(0,C.jsx)(A.A,{value:"VIEWER",children:"Viewer"})]})}),(0,C.jsx)(h.A,{onClick:()=>P(e),color:"error",children:(0,C.jsx)(L.A,{})})]},t))),R.map(((e,t)=>(0,C.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",marginBottom:1},children:[(0,C.jsx)(l.A,{sx:{flexGrow:1,marginLeft:2},children:e}),(0,C.jsx)(g.A,{sx:{width:100,marginRight:2},children:(0,C.jsxs)(f.A,{value:"VIEWER",onChange:t=>F(e,t.target.value),children:[(0,C.jsx)(A.A,{value:"EDITOR",children:"Editor"}),(0,C.jsx)(A.A,{value:"VIEWER",children:"Viewer"})]})}),(0,C.jsx)(h.A,{onClick:()=>P(e),color:"error",children:(0,C.jsx)(L.A,{})})]},t)))]}):(0,C.jsx)(l.A,{sx:{marginLeft:2},children:"List is currently private."}),(0,C.jsx)("br",{}),(0,C.jsxs)(w.A,{children:[(0,C.jsx)(y.A,{id:"panel-header","aria-controls":"panel-content",children:(0,C.jsx)(r.A,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:(0,C.jsx)(l.A,{fontSize:"large",children:"Add User"})})}),(0,C.jsxs)(v.A,{children:[(0,C.jsx)(g.A,{sx:{maxWidth:350,marginBottom:2},children:(0,C.jsx)(m.A,{inputProps:{maxLength:50},id:"new-item",label:"Username",variant:"outlined",value:o,onChange:e=>d(e.target.value),fullWidth:!0})}),(0,C.jsxs)(r.A,{sx:{display:"flex",justifyContent:"space-between",width:"100%",maxWidth:350},children:[(0,C.jsx)(g.A,{sx:{width:"48%"},children:(0,C.jsxs)(f.A,{value:c,onChange:e=>{u(e.target.value)},inputProps:{name:"role",id:"uncontrolled-native"},sx:{width:"100%"},children:[(0,C.jsx)(A.A,{value:"VIEWER",children:"Viewer"}),(0,C.jsx)(A.A,{value:"EDITOR",children:"Editor"})]})}),x?(0,C.jsx)(S,{}):(0,C.jsx)(b.A,{onClick:async()=>{j(!0),k("");try{if(!0===await I.sendPost("user/userExists",{username:o},n)){const e={...t,editors:"EDITOR"===c?[...E,o]:E,viewers:"VIEWER"===c?[...R,o]:R};d(""),u("VIEWER"),s(e)}else k("The username does not exist.")}catch(e){k("An error occurred while checking the username.")}finally{j(!1)}},variant:"outlined",sx:{height:"56px",width:"48%"},children:"Add User"})]}),(0,C.jsx)("br",{}),(0,C.jsxs)(l.A,{color:"error",children:[" ",p]})]})]})]})},E=e=>{let{uList:t}=e;return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(r.A,{p:2,children:[(0,C.jsxs)(r.A,{sx:{display:"flex"},children:[(0,C.jsx)(l.A,{fontSize:"large",sx:{fontFamily:"Garamond"},minWidth:100,children:(0,C.jsx)("strong",{children:"Owner: "})}),(0,C.jsx)(l.A,{fontSize:"large",children:t.owner})]}),!t.editors||0!==t.editors.length&&(0,C.jsxs)(r.A,{sx:{display:"flex"},children:[(0,C.jsx)(l.A,{fontSize:"large",sx:{fontFamily:"Garamond"},minWidth:100,children:(0,C.jsx)("strong",{children:"Editors: "})}),(0,C.jsx)(r.A,{children:t.editors.map((e=>(0,C.jsx)(l.A,{fontSize:"large",children:e},e)))})]}),!t.viewers||t.viewers.length>0&&(0,C.jsxs)(r.A,{sx:{display:"flex"},children:[(0,C.jsx)(l.A,{fontSize:"large",sx:{fontFamily:"Garamond"},minWidth:100,children:(0,C.jsx)("strong",{children:"Viewers: "})}),(0,C.jsx)(r.A,{children:t.viewers.map((e=>(0,C.jsx)(l.A,{fontSize:"large",children:e},e)))})]})]})})};const R=e=>{let{list:t,updateCopy:s}=e;const{user:n}=(0,i.useContext)(a.c);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("br",{}),(0,C.jsx)(m.A,{inputProps:{maxLength:100},id:"list-title",label:"Title",variant:"outlined",value:t.listInfo.listName,onChange:e=>(e=>{const i={...t,listInfo:{...t.listInfo,listName:e}};s(i)})(e.target.value),fullWidth:!0,sx:{marginBottom:1}}),(0,C.jsx)(m.A,{inputProps:{maxLength:100},id:"list-desc",label:"Description (optional)",variant:"outlined",value:t.listInfo.listDesc,onChange:e=>(e=>{const i={...t,listInfo:{...t.listInfo,listDesc:e}};s(i)})(e.target.value),fullWidth:!0,sx:{marginBottom:1}}),(0,C.jsxs)(g.A,{children:[(0,C.jsx)(l.A,{children:"List type:"}),(0,C.jsxs)(f.A,{value:t.listInfo.type,onChange:e=>{const i={...t,listInfo:{...t.listInfo,type:e.target.value}};s(i)},sx:{width:200,marginBottom:2},children:[(0,C.jsx)(A.A,{value:"BASIC",children:"Normal"}),(0,C.jsx)(A.A,{value:"CHECK",children:"Checklist"})]})]})]})};var F=s(9007),P=s(9217);const T=new x.A,W=e=>{let{uList:t,updateList:s}=e;const{loginDetails:o}=(0,i.useContext)(a.c),[d,c]=(0,i.useState)(!1),[u,x]=(0,i.useState)(""),[h,j]=(0,i.useState)(!1),p=(0,n.Zp)();(0,i.useEffect)((()=>{c(null!==t.listInfo.uuid),function(){if(null===t.listInfo.uuid)return"";x(P.Ec+t.listInfo.uuid)}()}),[t]);return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(r.A,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",children:d?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(l.A,{children:["List is ",(0,C.jsx)("strong",{children:"Public"})]}),(0,C.jsx)("br",{}),(0,C.jsx)(l.A,{children:"Share the link with anyone to let them view your list."}),(0,C.jsx)("br",{}),(0,C.jsx)(b.A,{sx:{m:1},variant:"outlined",fullWidth:!0,onClick:async()=>{try{await navigator.clipboard.writeText(u),j(!0),setTimeout((()=>j(!1)),2e3)}catch(e){console.error("Failed to copy text: ",e)}},children:h?"Link Copied!":"Copy Link"}),(0,C.jsx)(b.A,{sx:{m:1},variant:"outlined",fullWidth:!0,onClick:()=>{p("/web/public/".concat(t.listInfo.uuid))},children:"Go to Public List"}),(0,C.jsx)(b.A,{sx:{m:1},variant:"outlined",fullWidth:!0,onClick:async()=>{const e=await T.sendPost("list/makePrivate",t,o);s(e)},children:"Make private"})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(l.A,{children:["List is ",(0,C.jsx)("strong",{children:"Private"}),(0,C.jsx)("br",{})," Only you and those you invite are able to access the list."]}),(0,C.jsx)("br",{}),(0,C.jsx)(b.A,{sx:{m:1},variant:"outlined",fullWidth:!0,onClick:async()=>{const e=await T.sendPost("list/makePublic",t,o);s(e)},children:"Make public"}),(0,C.jsx)("br",{}),(0,C.jsx)(l.A,{children:"Make the list public to be able to share your list with anyone who has the link to it."})]})})})};new x.A;var D=s(8351),B=s(2475),U=s(6893),O=s(5721),z=s(1322),G=s(635),V=s(8734),N=s(9409),M=s(3851),J=s(155);const H=new x.A,_=e=>{let{uList:t,updateList:s}=e;const{loginDetails:n}=(0,i.useContext)(a.c);return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(O.A,{children:(0,C.jsx)(G.JY,{onDragEnd:e=>{if(!e.destination)return;const i=e.source.index,n=e.destination.index,r=[...t.items],[o]=r.splice(i,1);r.splice(n,0,o),r.forEach(((e,t)=>{e.itemOrder=t+1})),t.items=r,s(t)},children:(0,C.jsx)(G.gL,{droppableId:"items",children:e=>(0,C.jsxs)(r.A,{ref:e.innerRef,...e.droppableProps,children:[t.items.map(((e,t)=>(0,C.jsx)(G.sx,{index:t,draggableId:e.id+"",children:t=>(0,C.jsxs)(z.Ay,{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,sx:{cursor:"pointer",border:"1px solid ",borderColor:"primary.darker",marginTop:"5px",borderRadius:"5px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,C.jsx)(M.A,{children:(0,C.jsx)(r.A,{children:(0,C.jsx)(N.A,{})})}),(0,C.jsx)(V.A,{primary:e.item,primaryTypographyProps:{fontSize:"18px"}}),(0,C.jsx)(h.A,{edge:"end","aria-label":"delete",onClick:()=>(async e=>{const t=await H.sendDelete("list/item",e,n);s(t)})(e),children:(0,C.jsx)(J.A,{})})]})},e.id))),e.placeholder]})})})})})};var K=s(2505);const Z=e=>{let{uList:t,updateList:s}=e;const[n,o]=(0,i.useState)(""),[l,a]=(0,i.useState)(""),d=(0,i.useRef)();(0,i.useEffect)((()=>{}),[]);const c=()=>{if(""===n.trim())return;let e=function(e,s){const i={listId:t.listInfo.id,item:e,itemOrder:s.items.length+1};return{...s,items:[...s.items,i]}}(n,t);s(e),o(""),d.current.focus()};return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("form",{onSubmit:e=>{e.preventDefault(),c()},children:(0,C.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",mt:2},children:[(0,C.jsx)(m.A,{inputProps:{maxLength:200},id:"new-item",label:"Add to List",variant:"outlined",value:n,onChange:e=>o(e.target.value),fullWidth:!0,sx:{height:"56px"},inputRef:d,InputProps:{sx:{borderTopRightRadius:0,borderBottomRightRadius:0,"& .MuiOutlinedInput-notchedOutline":{borderTopRightRadius:0,borderBottomRightRadius:0},height:"56px",borderColor:"primary.darker"}}}),(0,C.jsx)(b.A,{type:"submit",variant:"outlined",sx:{borderTopLeftRadius:0,borderBottomLeftRadius:0,height:"56px",minWidth:"56px"},children:(0,C.jsx)(K.A,{})})]})})})};new x.A;var Y=s(3321),q=s(8082),Q=s(35),X=s(6600),$=s(5316),ee=s(9347);const te=e=>{let{uList:t,updateList:s}=e;const[n,r]=(0,i.useState)(""),[o,a]=(0,i.useState)(0);(0,i.useRef)();return(0,i.useEffect)((()=>{}),[]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(l.A,{fontSize:"small",sx:{paddingBottom:1},children:"Separate items by new line."}),(0,C.jsx)(m.A,{inputProps:{maxLength:200},id:"bulk-add",label:"Bulk add",variant:"outlined",value:n,onChange:e=>r(e.target.value),fullWidth:!0,multiline:!0,minRows:3,InputProps:{sx:{height:"112px",borderColor:"primary.darker"}}}),(0,C.jsx)(b.A,{variant:"outlined",p:1,fullWidth:!0,onClick:function(){let e={...t};const i=n.split(/\r?\n/);let o=0;i.forEach((s=>{""!==s.trim()&&(e=function(e,s){const i={listId:t.listInfo.id,item:e,itemOrder:s.items.length+1};return{...s,items:[...s.items,i]}}(s,e),o++)})),s(e),r(""),a(o)},children:"Add items"}),o>0&&(0,C.jsxs)(l.A,{children:[" ",o," items added to list."]})]})},se=new x.A,ie=e=>{let{uList:t,updateList:s,dialog:r,setDialog:o,option:d}=e;const{loginDetails:c,user:u}=(0,i.useContext)(a.c),[x,h]=(0,i.useState)({...t}),[j,p]=(0,i.useState)(!0),m=(0,n.Zp)();function g(){o(!1)}async function f(){await se.sendDelete("list",t.listInfo.id,c),o(!1),m("/web/overview")}async function A(){await se.sendPost("list/removeUser",{user:u.username,listId:t.listInfo.id},c),o(!1),m("/web/overview")}return(0,i.useEffect)((()=>{p(["manageUsers","editListInfo"].includes(d))}),[d]),(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(Q.A,{open:r,onClose:g,children:[(0,C.jsx)(X.A,{textAlign:"center",children:function(){switch(d){case"manageUsers":return"Manage Users";case"editListInfo":return"Edit Info";case"deleteList":return"Delete List";case"leaveList":return"Leave List";case"userInfo":return"Users";case"bulkAdd":return"Add Multiple Items";case"publicSettings":return"Public List Settings"}}()}),(0,C.jsx)($.A,{children:function(){switch(d){case"manageUsers":return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(k,{list:x,updateCopy:h})});case"editListInfo":return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(R,{list:x,updateCopy:h})});case"deleteList":return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(l.A,{textAlign:"center",p:1,children:["Warning: ",(0,C.jsx)("br",{}),"Deleting a list cannot be reversed."]}),(0,C.jsx)(b.A,{onClick:f,variant:"contained",sx:{padding:2},color:"warning",fullWidth:!0,children:"Delete list"})]});case"leaveList":return(0,C.jsxs)(C.Fragment,{children:[" ",(0,C.jsxs)(l.A,{textAlign:"center",p:1,children:["Warning: ",(0,C.jsx)("br",{}),"If you want to come back, the owner will have to add you again."]}),(0,C.jsx)(b.A,{onClick:A,variant:"contained",sx:{padding:2},color:"warning",fullWidth:!0,children:"Leave list"})]});case"userInfo":return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(E,{uList:x})});case"bulkAdd":return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(te,{uList:t,updateList:s})});case"publicSettings":return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(W,{uList:t,updateList:s})})}}()}),(0,C.jsxs)(ee.A,{sx:{justifyContent:"center"},children:[(0,C.jsx)(b.A,{onClick:g,variant:"contained",children:"Close"}),j&&(0,C.jsx)(b.A,{onClick:function(){"manageUsers"===d&&function(){let e=[],s=[];t.editors!==x.editors&&(e=t.editors.filter((e=>!x.editors.includes(e)))),t.viewers!==x.viewers&&(s=t.viewers.filter((e=>!x.viewers.includes(e)))),e.concat(s).forEach((e=>{se.sendPost("list/removeUser",{user:e,listId:t.listInfo.id},c)}))}(),s(x),o(!1)},variant:"contained",children:"Save Changes"})]})]})})},ne=e=>{let{uList:t,updateList:s}=e;const{user:r}=(0,i.useContext)(a.c),o=(0,n.Zp)(),[l,d]=(0,i.useState)(null),[c,u]=(0,i.useState)(!1),[x,j]=(0,i.useState)(null),[p,m]=(0,i.useState)(!1);(0,i.useEffect)((()=>{u(null!==t.listInfo.uuid)}),[t]);const g=()=>d(null),f=e=>{j(e),m(!0),g()};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(h.A,{sx:{position:"sticky",top:0,right:0,color:"primary.lighter",fontSize:"large"},id:"basic-button","aria-controls":Boolean(l)?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":Boolean(l)?"true":void 0,onClick:e=>d(e.currentTarget),children:(0,C.jsx)(q.A,{})}),(0,C.jsx)(Y.A,{id:"basic-menu",anchorEl:l,open:Boolean(l),onClose:g,MenuListProps:{"aria-labelledby":"basic-button"},children:(()=>{const e=[{text:"User Information",action:()=>f("userInfo"),roles:["viewers"]},{text:"Bulk Add Items",action:()=>f("bulkAdd"),roles:["owner","editors"]},{text:"Edit List Information",action:()=>f("editListInfo"),roles:["owner","editors"]},{text:"Go to Public Page",action:()=>o("/web/public/".concat(t.listInfo.uuid)),roles:["viewers","editors"],condition:c},{text:"Leave List",action:()=>f("leaveList"),roles:["viewers","editors"]},{text:"Handle Users",action:()=>f("manageUsers"),roles:["owner"]},{text:"Edit Public Settings",action:()=>f("publicSettings"),roles:["owner"]},{text:"Delete List",action:()=>f("deleteList"),roles:["owner"]}],s=e.filter((e=>e.roles.includes("owner"))),i=e.filter((e=>e.roles.includes("editors"))),n=e.filter((e=>e.roles.includes("viewers")));return t.owner===r.username?s:null!==t.editors&&t.editors.includes(r.username)?i:null!==t.viewers&&t.viewers.includes(r.username)?n:[]})().map((e=>{let{text:t,action:s,condition:i=!0}=e;return i&&(0,C.jsx)(A.A,{onClick:s,children:t},t)}))}),(0,C.jsx)(ie,{uList:t,updateList:s,dialog:p,setDialog:m,option:x})]})};var re=s(5704);const oe=e=>{let{uList:t,updateList:s}=e;const{user:n}=(0,i.useContext)(a.c),[o,d]=(0,i.useState)(!0),[c,u]=(0,i.useState)((()=>n.username===t.owner||t.editors.includes(n.username)));return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(r.A,{maxWidth:750,sx:{mx:"auto"},variant:"contained",children:[(0,C.jsxs)(r.A,{children:[(0,C.jsx)(F.A,{title:t.listInfo.listName}),(0,C.jsx)(re.A,{uList:t}),(0,C.jsx)(l.A,{sx:{gridRow:"2",gridColumn:"1 / 3",textAlign:"left",p:1},children:(()=>{if(t.owner===n.username&&0===t.editors.length&&0===t.viewers.length)return(0,C.jsx)(C.Fragment,{});{const e=[...t.editors,...t.viewers].join(", "),s=t.owner+", "+e;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(U.A,{sx:{verticalAlign:"middle",mr:1}}),s]})}})()})]}),(0,C.jsxs)(r.A,{sx:{border:"1px solid ",borderColor:"primary.darker"},children:[(0,C.jsxs)(r.A,{sx:{backgroundColor:"primary.darker",display:"flex",justifyContent:"flex-end"},children:[c&&(0,C.jsx)(h.A,{variant:"outlined",onClick:()=>{d(!o)},children:o?(0,C.jsx)(j.A,{sx:{color:"primary.lighter"}}):(0,C.jsx)(p.A,{sx:{color:"primary.lighter"}})}),(0,C.jsx)(ne,{uList:t,updateList:s})]}),o?(0,C.jsx)(r.A,{children:(x=t,"CHECK"===x.listInfo.type?(0,C.jsx)(D.A,{uList:t,updateList:s}):(0,C.jsx)(B.A,{uList:t}))}):(0,C.jsx)(_,{uList:t,updateList:s}),c&&(0,C.jsx)(Z,{uList:t,updateList:s})]})]})});var x},le=new x.A,ae=()=>{const{id:e}=(0,n.g)(),{loginDetails:t}=(0,i.useContext)(a.c),[s,d]=(0,i.useState)(!0),[x,h]=(0,i.useState)(null),[j,p]=(0,i.useState)(null),[m,g]=(0,i.useState)(!1);(0,i.useEffect)((()=>{(async()=>{try{const s=await le.sendGet("list/".concat(e),t);h(s)}catch(s){g(!0)}finally{d(!1)}})();const s=new(c())(P.yv),i=new u.K({webSocketFactory:()=>s,onConnect:()=>{console.log("Connected to WebSocket"),i.subscribe("/topic/list/".concat(e),(e=>{const t=JSON.parse(e.body);h(t)}))},onStompError:e=>{console.error("Broker reported error: "+e.headers.message),console.error("Additional details: "+e.body)}});return i.activate(),p(i),()=>{i&&i.connected&&i.deactivate()}}),[e,t]);return(0,C.jsx)(C.Fragment,{children:s?(0,C.jsxs)(r.A,{children:[(0,C.jsx)(o.A,{}),(0,C.jsx)(l.A,{children:"Loading List"})]}):(0,C.jsx)(C.Fragment,{children:m?(0,C.jsx)(l.A,{children:"Unable to load list."}):(0,C.jsx)(oe,{uList:x,updateList:t=>{j&&j.connected&&(j.publish({destination:"/app/list/".concat(e),body:JSON.stringify(t)}),console.log("Sent update to WebSocket"))}})})})}}}]);
//# sourceMappingURL=369.e214e151.chunk.js.map