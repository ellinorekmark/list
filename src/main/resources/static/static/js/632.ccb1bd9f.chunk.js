"use strict";(self.webpackChunklistig_react_ui=self.webpackChunklistig_react_ui||[]).push([[632],{6879:(e,t,s)=>{s.d(t,{A:()=>n});var i=s(9217);class n{constructor(){this.baseUrl=i.C1}async sendPost(e,t,s){const i=await fetch(this.baseUrl+e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+s},body:JSON.stringify(t)});if(!i.ok){console.log(await i.json());const e=await i.json();throw new Error(e)}return await i.json()}async sendPostNoLogin(e,t){const s=await fetch(this.baseUrl+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){const e=await s.json();throw new Error(e)}return await s.json()}async sendGet(e,t){const s=await fetch(this.baseUrl+e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Basic "+t}});if(!s.ok)throw new Error(await s.json());return await s.json()}async sendGetNoAuth(e){const t=await fetch(this.baseUrl+e,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(await t.json());return await t.json()}async sendDelete(e,t,s){const i=await fetch(this.baseUrl+e,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Basic "+s},body:JSON.stringify(t)});if(!i.ok)throw new Error(await i.json());return await i.json()}}},2475:(e,t,s)=>{s.d(t,{A:()=>u});s(5043);var i=s(5721),n=s(1322),r=s(3851),o=s(6446),a=s(8734),l=s(7392),d=s(4208),c=s(579);const u=e=>{let{uList:t}=e;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(i.A,{children:t.items.map((e=>(0,c.jsxs)(n.Ay,{sx:{cursor:"pointer",border:"1px solid ",borderColor:"primary.darker",marginTop:"5px",borderRadius:"5px"},children:[(0,c.jsx)(r.A,{children:(0,c.jsx)(o.A,{})}),(0,c.jsx)(a.A,{primary:e.item,primaryTypographyProps:{fontSize:"18px"}}),(0,c.jsx)(l.A,{sx:{pointerEvents:"none"},edge:"end",children:(0,c.jsx)(d.A,{})})]},e.id)))})})}},8351:(e,t,s)=>{s.d(t,{A:()=>j});var i=s(5043),n=s(5721),r=s(1322),o=s(3851),a=s(6446),l=s(8734),d=s(7392),c=s(4208),u=s(6581),x=s(4109),h=s(9613),p=s(579);const j=e=>{let{uList:t,updateList:s,isPublic:j}=e;const{user:m}=(0,i.useContext)(h.c),[g,f]=(0,i.useState)((()=>!j&&(m.username===t.owner||t.editors.includes(m.username))));return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(n.A,{children:t.items.map((e=>{return(0,p.jsxs)(r.Ay,{sx:{cursor:"pointer",border:"1px solid ",borderColor:"primary.darker",marginTop:"5px",borderRadius:"5px"},onClick:()=>(e=>{if(g){const i=t.items.map((t=>t.id===e?{...t,itemStatus:"1"===t.itemStatus?"":"1"}:t));s({...t,items:i})}})(e.id),children:[(0,p.jsx)(o.A,{children:(0,p.jsx)(a.A,{children:(i=e.itemStatus,"1"===i?(0,p.jsx)(u.A,{sx:{color:"secondary.main"}}):(0,p.jsx)(x.A,{sx:{color:"secondary.main"}}))})}),(0,p.jsx)(l.A,{primary:e.item,primaryTypographyProps:{fontSize:"18px"}}),(0,p.jsx)(d.A,{sx:{pointerEvents:"none"},edge:"end",children:(0,p.jsx)(c.A,{})})]},e.id);var i}))})})}},5828:(e,t,s)=>{s.d(t,{A:()=>A});var i=s(5043),n=s(5721),r=s(1322),o=s(3851),a=s(8734),l=s(7392),d=s(35),c=s(6600),u=s(1906),x=s(5316),h=s(5146),p=s(9347),j=s(6485),m=s(2577),g=s(9613),f=s(579);const A=e=>{let{uList:t,updateList:s,isPublic:A}=e;const{user:w}=(0,i.useContext)(g.c),[y,b]=(0,i.useState)((()=>!A&&(w.username===t.owner||t.editors.includes(w.username)))),[v,L]=(0,i.useState)(!1),[C,S]=(0,i.useState)(""),[I,k]=(0,i.useState)(""),[E,R]=(0,i.useState)(!1);function P(e){""!==e&&window.open(e,"_blank","noopener,noreferrer")}return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(n.A,{children:t.items.map((e=>(0,f.jsxs)(r.Ay,{sx:{cursor:"pointer",border:"1px solid ",borderColor:"primary.darker",marginTop:"5px",borderRadius:"5px"},children:[(0,f.jsx)(o.A,{onClick:()=>P(e.itemStatus),children:""!==e.itemStatus&&(0,f.jsx)(j.A,{})}),(0,f.jsx)(a.A,{primary:e.item,primaryTypographyProps:{fontSize:"18px"},onClick:()=>P(e.itemStatus)}),(0,f.jsx)(l.A,{edge:"end",onClick:()=>function(e){S(e),k(e.itemStatus),L(!0)}(e),children:(0,f.jsx)(m.A,{})})]},e.id)))}),(0,f.jsxs)(d.A,{open:v,onClose:()=>{L(!1)},children:[(0,f.jsx)(c.A,{textAlign:"center",children:"Edit link"}),(0,f.jsx)("br",{}),""!==I&&(0,f.jsx)(u.A,{variant:"outlined",fullWidth:!0,onClick:async()=>{try{await navigator.clipboard.writeText(I),R(!0),setTimeout((()=>R(!1)),2e3)}catch(e){console.error("Failed to copy text: ",e)}},children:E?"Link Copied!":"Copy Link"}),(0,f.jsx)(x.A,{children:y?(0,f.jsx)(h.A,{label:"Edit Link",value:I,onChange:e=>k(e.target.value)}):(0,f.jsx)(h.A,{label:"Link",value:I})}),(0,f.jsxs)(p.A,{sx:{justifyContent:"center"},children:[(0,f.jsx)(u.A,{onClick:()=>{L(!1)},variant:"contained",children:"Close"}),y&&(0,f.jsx)(u.A,{onClick:()=>{!function(){const e=t.items.map((e=>e.id===C.id?{...e,itemStatus:I}:e));s({...t,items:e}),L(!1)}()},variant:"contained",children:"Save"})]})]})]})}},5704:(e,t,s)=>{s.d(t,{A:()=>o});s(5043);var i=s(6446),n=s(5865),r=s(579);const o=e=>{let{uList:t}=e;return(0,r.jsx)(r.Fragment,{children:(()=>{if(null!==t.listInfo.listDesc)return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i.A,{sx:{marginBottom:1,gridRow:"1",gridColumn:"1 / 2",m:1,paddingLeft:2,paddingRight:2},children:(0,r.jsxs)(n.A,{fontSize:"large",children:[t.listInfo.listDesc,(0,r.jsx)("br",{})]})})})})()})}},9007:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(5865),n=s(6446),r=(s(5043),s(579));const o=e=>{let{title:t}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(n.A,{sx:{paddingTop:2,paddingRight:5,paddingLeft:5},children:[(0,r.jsx)(i.A,{fontSize:"xx-large",sx:{fontFamily:"Garamond",color:"primary.main"},children:(0,r.jsx)("strong",{children:t})}),(0,r.jsx)("br",{})]})})}},7632:(e,t,s)=>{s.r(t),s.d(t,{default:()=>de});var i=s(5043),n=s(835),r=s(6446),o=s(1637),a=s(5865),l=s(9613),d=s(5081),c=s.n(d),u=s(7285),x=s(6879),h=s(7392),p=s(7555),j=s(3531),m=s(8351),g=s(2475),f=s(6893),A=s(5721),w=s(1322),y=s(635),b=s(8734),v=s(9409),L=s(3851),C=s(155),S=s(579);const I=new x.A,k=e=>{let{uList:t,updateList:s}=e;const{loginDetails:n}=(0,i.useContext)(l.c),[a,d]=(0,i.useState)("");(0,i.useEffect)((()=>{d("")}),[t]);return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(A.A,{children:(0,S.jsx)(y.JY,{onDragEnd:e=>{if(!e.destination)return;const i=e.source.index,n=e.destination.index,r=[...t.items],[o]=r.splice(i,1);r.splice(n,0,o),r.forEach(((e,t)=>{e.itemOrder=t+1})),t.items=r,s(t)},children:(0,S.jsx)(y.gL,{droppableId:"items",children:e=>(0,S.jsxs)(r.A,{ref:e.innerRef,...e.droppableProps,children:[t.items.map(((e,t)=>(0,S.jsx)(y.sx,{index:t,draggableId:e.id+"",children:t=>(0,S.jsxs)(w.Ay,{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,sx:{cursor:"pointer",border:"1px solid ",borderColor:"primary.darker",marginTop:"5px",borderRadius:"5px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,S.jsx)(L.A,{children:(0,S.jsx)(r.A,{children:(0,S.jsx)(v.A,{})})}),(0,S.jsx)(b.A,{primary:e.item,primaryTypographyProps:{fontSize:"18px"}}),a===e?(0,S.jsx)(o.A,{}):(0,S.jsx)(h.A,{edge:"end","aria-label":"delete",onClick:()=>(async e=>{d(e);const t=await I.sendDelete("list/item",e,n);s(t)})(e),children:(0,S.jsx)(C.A,{})})]})},e.id))),e.placeholder]})})})})})};var E=s(5146),R=s(1906),P=s(2505);const F=e=>{let{uList:t,updateList:s}=e;const[n,a]=(0,i.useState)(""),[l,d]=(0,i.useState)(""),[c,u]=(0,i.useState)(!1),x=(0,i.useRef)();(0,i.useEffect)((()=>{u(!1)}),[t]);const h=()=>{if(""===n.trim())return;let e=function(e,s){const i={listId:t.listInfo.id,item:e,itemOrder:s.items.length+1,itemStatus:l};return{...s,items:[...s.items,i]}}(n,t);s(e),a(""),d(""),x.current.focus()};return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("form",{onSubmit:e=>{e.preventDefault(),u(!0),h()},children:(0,S.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",mt:2},children:[(0,S.jsxs)(r.A,{sx:{flex:1,display:"flex",flexDirection:"column"},children:[(0,S.jsx)(E.A,{inputProps:{maxLength:200},id:"new-item",autoComplete:"off",label:"Add to List",variant:"outlined",value:n,onChange:e=>a(e.target.value),fullWidth:!0,sx:{height:"56px"},inputRef:x,InputProps:{sx:{borderTopRightRadius:0,borderBottomRightRadius:0,"& .MuiOutlinedInput-notchedOutline":{borderTopRightRadius:0,borderBottomRightRadius:0},height:"56px",borderColor:"primary.darker"}}}),"LINK"===t.listInfo.type&&(0,S.jsx)(E.A,{inputProps:{maxLength:200},id:"new-item",label:"URL",variant:"outlined",value:l,onChange:e=>d(e.target.value),fullWidth:!0,sx:{height:"56px"},inputRef:x,InputProps:{sx:{borderTopRightRadius:0,borderBottomRightRadius:0,"& .MuiOutlinedInput-notchedOutline":{borderTopRightRadius:0,borderBottomRightRadius:0},height:"56px",borderColor:"primary.darker"}}})]}),c?(0,S.jsx)(o.A,{}):(0,S.jsx)(R.A,{type:"submit",variant:"outlined",sx:{borderTopLeftRadius:0,borderBottomLeftRadius:0,minWidth:"56px",height:"LINK"===t.listInfo.type?"112px":"56px"},children:(0,S.jsx)(P.A,{})})]})})})};var T=s(9007),W=s(3321),D=s(6990),B=s(8082),O=s(35),U=s(6600),z=s(5316),N=s(9347),G=s(3193),V=s(9285);const M=e=>{let{list:t,updateCopy:s}=e;const{user:n}=(0,i.useContext)(l.c);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("br",{}),(0,S.jsx)(E.A,{inputProps:{maxLength:100},id:"list-title",label:"Title",variant:"outlined",value:t.listInfo.listName,onChange:e=>(e=>{const i={...t,listInfo:{...t.listInfo,listName:e}};s(i)})(e.target.value),fullWidth:!0,sx:{marginBottom:1}}),(0,S.jsx)(E.A,{inputProps:{maxLength:100},id:"list-desc",label:"Description (optional)",variant:"outlined",value:t.listInfo.listDesc,onChange:e=>(e=>{const i={...t,listInfo:{...t.listInfo,listDesc:e}};s(i)})(e.target.value),fullWidth:!0,sx:{marginBottom:1}}),(0,S.jsxs)(G.A,{children:[(0,S.jsx)(a.A,{children:"List type:"}),"LINK"===t.listInfo.type?(0,S.jsx)(a.A,{children:"Linked"}):(0,S.jsxs)(V.A,{value:t.listInfo.type,onChange:e=>{const i={...t,listInfo:{...t.listInfo,type:e.target.value}};s(i)},sx:{width:200,marginBottom:2},children:[(0,S.jsx)(D.A,{value:"BASIC",children:"Normal"}),(0,S.jsx)(D.A,{value:"CHECK",children:"Checklist"})]})]})]})};var K=s(9217);const J=new x.A,_=e=>{let{uList:t,updateList:s}=e;const{loginDetails:d}=(0,i.useContext)(l.c),[c,u]=(0,i.useState)(!1),[x,h]=(0,i.useState)(""),[p,j]=(0,i.useState)(!1),[m,g]=(0,i.useState)(!1),f=(0,n.Zp)();(0,i.useEffect)((()=>{u(null!==t.listInfo.uuid),function(){if(null===t.listInfo.uuid)return"";h(K.Ec+t.listInfo.uuid)}(),g(!1)}),[t]);return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(r.A,{sx:{maxWidth:300},children:c?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(a.A,{children:["List is ",(0,S.jsx)("strong",{children:"Public"})]}),(0,S.jsx)("br",{}),(0,S.jsx)(a.A,{children:"Share the link with anyone to let them view your list."}),(0,S.jsx)("br",{}),(0,S.jsx)(R.A,{sx:{m:1},variant:"outlined",fullWidth:!0,onClick:async()=>{try{await navigator.clipboard.writeText(x),j(!0),setTimeout((()=>j(!1)),2e3)}catch(e){console.error("Failed to copy text: ",e)}},children:p?"Link Copied!":"Copy Link"}),(0,S.jsx)(R.A,{sx:{m:1},variant:"outlined",fullWidth:!0,onClick:()=>{f("/web/public/".concat(t.listInfo.uuid))},children:"Go to Public List"}),m?(0,S.jsx)(o.A,{}):(0,S.jsx)(R.A,{sx:{m:1},variant:"outlined",fullWidth:!0,onClick:async()=>{g(!0);const e=await J.sendPost("list/makePrivate",t,d);s(e)},children:"Make private"})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(a.A,{children:["List is ",(0,S.jsx)("strong",{children:"Private"}),(0,S.jsx)("br",{})," Only you and those you invite are able to access the list."]}),(0,S.jsx)("br",{}),m?(0,S.jsx)(o.A,{}):(0,S.jsx)(R.A,{sx:{m:1},variant:"outlined",fullWidth:!0,onClick:async()=>{g(!0);const e=await J.sendPost("list/makePublic",t,d);s(e)},children:"Make public"}),(0,S.jsx)("br",{}),(0,S.jsx)(a.A,{children:"Make the list public to be able to share your list with anyone who has the link to it."})]})})})};var H=s(3766),Z=s(6605),Y=s(710),q=s(3471);const Q=new x.A;function X(){return null}const $=e=>{let{list:t,updateCopy:s}=e;const{loginDetails:n}=(0,i.useContext)(l.c),[o,d]=(0,i.useState)(""),[c,u]=(0,i.useState)("VIEWER"),[x,p]=(0,i.useState)(!1),[j,m]=(0,i.useState)(""),g=t.editors||[],f=t.viewers||[],A=(e,i)=>{let n=[...g],r=[...f];"EDITOR"===i?(r=r.filter((t=>t!==e)),n.includes(e)||n.push(e)):"VIEWER"===i&&(n=n.filter((t=>t!==e)),r.includes(e)||r.push(e));const o={...t,editors:n,viewers:r};s(o)},w=e=>{const i={...t,editors:g.filter((t=>t!==e)),viewers:f.filter((t=>t!==e))};s(i)};return(0,S.jsxs)(S.Fragment,{children:[g.length>0||f.length>0?(0,S.jsxs)(S.Fragment,{children:[g.map(((e,t)=>(0,S.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",marginBottom:1},children:[(0,S.jsx)(a.A,{sx:{flexGrow:1,marginLeft:2},children:e}),(0,S.jsx)(G.A,{sx:{width:100,marginRight:2},children:(0,S.jsxs)(V.A,{value:"EDITOR",onChange:t=>A(e,t.target.value),children:[(0,S.jsx)(D.A,{value:"EDITOR",children:"Editor"}),(0,S.jsx)(D.A,{value:"VIEWER",children:"Viewer"})]})}),(0,S.jsx)(h.A,{onClick:()=>w(e),color:"error",children:(0,S.jsx)(q.A,{})})]},t))),f.map(((e,t)=>(0,S.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",marginBottom:1},children:[(0,S.jsx)(a.A,{sx:{flexGrow:1,marginLeft:2},children:e}),(0,S.jsx)(G.A,{sx:{width:100,marginRight:2},children:(0,S.jsxs)(V.A,{value:"VIEWER",onChange:t=>A(e,t.target.value),children:[(0,S.jsx)(D.A,{value:"EDITOR",children:"Editor"}),(0,S.jsx)(D.A,{value:"VIEWER",children:"Viewer"})]})}),(0,S.jsx)(h.A,{onClick:()=>w(e),color:"error",children:(0,S.jsx)(q.A,{})})]},t)))]}):(0,S.jsx)(a.A,{sx:{marginLeft:2},children:"List is currently private."}),(0,S.jsx)("br",{}),(0,S.jsxs)(H.A,{children:[(0,S.jsx)(Z.A,{id:"panel-header","aria-controls":"panel-content",children:(0,S.jsx)(r.A,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:(0,S.jsx)(a.A,{fontSize:"large",children:"Add User"})})}),(0,S.jsxs)(Y.A,{children:[(0,S.jsx)(G.A,{sx:{maxWidth:350,marginBottom:2},children:(0,S.jsx)(E.A,{inputProps:{maxLength:50},id:"new-item",label:"Username",variant:"outlined",value:o,onChange:e=>d(e.target.value),fullWidth:!0})}),(0,S.jsxs)(r.A,{sx:{display:"flex",justifyContent:"space-between",width:"100%",maxWidth:350},children:[(0,S.jsx)(G.A,{sx:{width:"48%"},children:(0,S.jsxs)(V.A,{value:c,onChange:e=>{u(e.target.value)},inputProps:{name:"role",id:"uncontrolled-native"},sx:{width:"100%"},children:[(0,S.jsx)(D.A,{value:"VIEWER",children:"Viewer"}),(0,S.jsx)(D.A,{value:"EDITOR",children:"Editor"})]})}),x?(0,S.jsx)(X,{}):(0,S.jsx)(R.A,{onClick:async()=>{p(!0),m("");try{if(!0===await Q.sendPost("user/userExists",{username:o},n)){const e={...t,editors:"EDITOR"===c?[...g,o]:g,viewers:"VIEWER"===c?[...f,o]:f};d(""),u("VIEWER"),s(e)}else m("The username does not exist.")}catch(e){m("An error occurred while checking the username.")}finally{p(!1)}},variant:"outlined",sx:{height:"56px",width:"48%"},children:"Add User"})]}),(0,S.jsx)("br",{}),(0,S.jsxs)(a.A,{color:"error",children:[" ",j]})]})]})]})},ee=e=>{let{uList:t}=e;return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(r.A,{p:2,children:[(0,S.jsxs)(r.A,{sx:{display:"flex"},children:[(0,S.jsx)(a.A,{fontSize:"large",sx:{fontFamily:"Garamond"},minWidth:100,children:(0,S.jsx)("strong",{children:"Owner: "})}),(0,S.jsx)(a.A,{fontSize:"large",children:t.owner})]}),!t.editors||0!==t.editors.length&&(0,S.jsxs)(r.A,{sx:{display:"flex"},children:[(0,S.jsx)(a.A,{fontSize:"large",sx:{fontFamily:"Garamond"},minWidth:100,children:(0,S.jsx)("strong",{children:"Editors: "})}),(0,S.jsx)(r.A,{children:t.editors.map((e=>(0,S.jsx)(a.A,{fontSize:"large",children:e},e)))})]}),!t.viewers||t.viewers.length>0&&(0,S.jsxs)(r.A,{sx:{display:"flex"},children:[(0,S.jsx)(a.A,{fontSize:"large",sx:{fontFamily:"Garamond"},minWidth:100,children:(0,S.jsx)("strong",{children:"Viewers: "})}),(0,S.jsx)(r.A,{children:t.viewers.map((e=>(0,S.jsx)(a.A,{fontSize:"large",children:e},e)))})]})]})})},te=e=>{let{uList:t,updateList:s}=e;const[n,r]=(0,i.useState)(""),[o,l]=(0,i.useState)(0);(0,i.useRef)();return(0,i.useEffect)((()=>{}),[]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(a.A,{fontSize:"small",sx:{paddingBottom:1},children:"Separate items by new line."}),(0,S.jsx)(E.A,{inputProps:{maxLength:200},autoComplete:"off",id:"bulk-add",label:"Bulk add",variant:"outlined",value:n,onChange:e=>r(e.target.value),fullWidth:!0,multiline:!0,minRows:3,InputProps:{sx:{height:"112px",borderColor:"primary.darker"}}}),(0,S.jsx)(R.A,{variant:"outlined",p:1,fullWidth:!0,onClick:function(){let e={...t};const i=n.split(/\r?\n/);let o=0;i.forEach((s=>{""!==s.trim()&&(e=function(e,s){const i={listId:t.listInfo.id,item:e,itemOrder:s.items.length+1};return{...s,items:[...s.items,i]}}(s,e),o++)})),s(e),r(""),l(o)},children:"Add items"}),o>0&&(0,S.jsxs)(a.A,{children:[" ",o," items added to list."]})]})},se=new x.A,ie=e=>{let{uList:t,updateList:s,dialog:r,setDialog:o,option:d}=e;const{loginDetails:c,user:u}=(0,i.useContext)(l.c),[x,h]=(0,i.useState)({...t}),[p,j]=(0,i.useState)(!0),m=(0,n.Zp)();function g(){o(!1)}async function f(){await se.sendDelete("list",t.listInfo.id,c),o(!1),m("/web/overview")}async function A(){await se.sendPost("list/removeUser",{user:u.username,listId:t.listInfo.id},c),o(!1),m("/web/overview")}return(0,i.useEffect)((()=>{j(["manageUsers","editListInfo"].includes(d))}),[d]),(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(O.A,{open:r,onClose:g,children:[(0,S.jsx)(U.A,{textAlign:"center",children:function(){switch(d){case"manageUsers":return"Manage Users";case"editListInfo":return"Edit Info";case"deleteList":return"Delete List";case"leaveList":return"Leave List";case"userInfo":return"Users";case"bulkAdd":return"Add Multiple Items";case"publicSettings":return"Public List Settings"}}()}),(0,S.jsx)(z.A,{children:function(){switch(d){case"manageUsers":return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)($,{list:x,updateCopy:h})});case"editListInfo":return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(M,{list:x,updateCopy:h})});case"deleteList":return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(a.A,{textAlign:"center",p:1,children:["Warning: ",(0,S.jsx)("br",{}),"Deleting a list cannot be reversed."]}),(0,S.jsx)(R.A,{onClick:f,variant:"contained",sx:{padding:2},color:"warning",fullWidth:!0,children:"Delete list"})]});case"leaveList":return(0,S.jsxs)(S.Fragment,{children:[" ",(0,S.jsxs)(a.A,{textAlign:"center",p:1,children:["Warning: ",(0,S.jsx)("br",{}),"If you want to come back, the owner will have to add you again."]}),(0,S.jsx)(R.A,{onClick:A,variant:"contained",sx:{padding:2},color:"warning",fullWidth:!0,children:"Leave list"})]});case"userInfo":return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(ee,{uList:x})});case"bulkAdd":return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(te,{uList:t,updateList:s})});case"publicSettings":return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(_,{uList:t,updateList:s})})}}()}),(0,S.jsxs)(N.A,{sx:{justifyContent:"center"},children:[(0,S.jsx)(R.A,{onClick:g,variant:"contained",children:"Close"}),p&&(0,S.jsx)(R.A,{onClick:function(){"manageUsers"===d&&function(){let e=[],s=[];t.editors!==x.editors&&(e=t.editors.filter((e=>!x.editors.includes(e)))),t.viewers!==x.viewers&&(s=t.viewers.filter((e=>!x.viewers.includes(e)))),e.concat(s).forEach((e=>{se.sendPost("list/removeUser",{user:e,listId:t.listInfo.id},c)}))}(),s(x),o(!1)},variant:"contained",children:"Save Changes"})]})]})})},ne=e=>{let{uList:t,updateList:s}=e;const{user:r}=(0,i.useContext)(l.c),o=(0,n.Zp)(),[a,d]=(0,i.useState)(null),[c,u]=(0,i.useState)(!1),[x,p]=(0,i.useState)(null),[j,m]=(0,i.useState)(!1);(0,i.useEffect)((()=>{u(null!==t.listInfo.uuid)}),[t]);const g=()=>d(null),f=e=>{p(e),m(!0),g()};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(h.A,{sx:{position:"sticky",top:0,right:0,color:"primary.lighter",fontSize:"large"},id:"basic-button","aria-controls":Boolean(a)?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":Boolean(a)?"true":void 0,onClick:e=>d(e.currentTarget),children:(0,S.jsx)(B.A,{})}),(0,S.jsx)(W.A,{id:"basic-menu",anchorEl:a,open:Boolean(a),onClose:g,MenuListProps:{"aria-labelledby":"basic-button"},children:(()=>{const e=[{text:"User Information",action:()=>f("userInfo"),roles:["viewers"]},{text:"Bulk Add Items",action:()=>f("bulkAdd"),roles:["owner","editors"]},{text:"Edit List Information",action:()=>f("editListInfo"),roles:["owner","editors"]},{text:"Go to Public Page",action:()=>o("/web/public/".concat(t.listInfo.uuid)),roles:["viewers","editors"],condition:c},{text:"Leave List",action:()=>f("leaveList"),roles:["viewers","editors"]},{text:"Handle Users",action:()=>f("manageUsers"),roles:["owner"]},{text:"Edit Public Settings",action:()=>f("publicSettings"),roles:["owner"]},{text:"Delete List",action:()=>f("deleteList"),roles:["owner"]}],s=e.filter((e=>e.roles.includes("owner"))),i=e.filter((e=>e.roles.includes("editors"))),n=e.filter((e=>e.roles.includes("viewers")));return t.owner===r.username?s:null!==t.editors&&t.editors.includes(r.username)?i:null!==t.viewers&&t.viewers.includes(r.username)?n:[]})().map((e=>{let{text:t,action:s,condition:i=!0}=e;return i&&(0,S.jsx)(D.A,{onClick:s,children:t},t)}))}),(0,S.jsx)(ie,{uList:t,updateList:s,dialog:j,setDialog:m,option:x})]})};var re=s(5704),oe=s(5828);const ae=e=>{let{uList:t,updateList:s}=e;const{user:n}=(0,i.useContext)(l.c),[o,d]=(0,i.useState)(!0),[c,u]=(0,i.useState)((()=>n.username===t.owner||t.editors.includes(n.username)));return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(r.A,{maxWidth:750,sx:{mx:"auto"},variant:"contained",children:[(0,S.jsxs)(r.A,{children:[(0,S.jsx)(T.A,{title:t.listInfo.listName}),(0,S.jsx)(re.A,{uList:t}),(0,S.jsx)(a.A,{sx:{gridRow:"2",gridColumn:"1 / 3",textAlign:"left",p:1},children:(()=>{if(t.owner===n.username&&0===t.editors.length&&0===t.viewers.length)return(0,S.jsx)(S.Fragment,{});{const e=[...t.editors,...t.viewers].join(", "),s=t.owner+", "+e;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(f.A,{sx:{verticalAlign:"middle",mr:1}}),s]})}})()})]}),(0,S.jsxs)(r.A,{sx:{border:"1px solid ",borderColor:"primary.darker"},children:[(0,S.jsxs)(r.A,{sx:{backgroundColor:"primary.darker",display:"flex",justifyContent:"flex-end"},children:[c&&(0,S.jsx)(h.A,{variant:"outlined",onClick:()=>{d(!o)},children:o?(0,S.jsx)(p.A,{sx:{color:"primary.lighter"}}):(0,S.jsx)(j.A,{sx:{color:"primary.lighter"}})}),(0,S.jsx)(ne,{uList:t,updateList:s})]}),o?(0,S.jsx)(r.A,{children:function(e){switch(e.listInfo.type){case"CHECK":return(0,S.jsx)(m.A,{uList:t,updateList:s,isPublic:!1});case"LINK":return(0,S.jsx)(oe.A,{uList:t,updateList:s,isPublic:!1});default:return(0,S.jsx)(g.A,{uList:t})}}(t)}):(0,S.jsx)(k,{uList:t,updateList:s}),c&&(0,S.jsx)(F,{uList:t,updateList:s})]})]})})},le=new x.A,de=()=>{const{id:e}=(0,n.g)(),{loginDetails:t}=(0,i.useContext)(l.c),[s,d]=(0,i.useState)(!0),[x,h]=(0,i.useState)(null),[p,j]=(0,i.useState)(null),[m,g]=(0,i.useState)(!1);(0,i.useEffect)((()=>{(async()=>{try{const s=await le.sendGet("list/".concat(e),t);h(s)}catch(s){g(!0)}finally{d(!1)}})();const s=new(c())(K.yv),i=new u.K({webSocketFactory:()=>s,onConnect:()=>{console.log("Connected to WebSocket"),i.subscribe("/topic/list/".concat(e),(e=>{const t=JSON.parse(e.body);h(t)}))},onStompError:e=>{console.error("Broker reported error: "+e.headers.message),console.error("Additional details: "+e.body)}});return i.activate(),j(i),()=>{i&&i.connected&&i.deactivate()}}),[e,t]);return(0,S.jsx)(S.Fragment,{children:s?(0,S.jsxs)(r.A,{children:[(0,S.jsx)(o.A,{}),(0,S.jsx)(a.A,{children:"Loading List"})]}):(0,S.jsx)(S.Fragment,{children:m?(0,S.jsx)(a.A,{children:"Unable to load list."}):(0,S.jsx)(ae,{uList:x,updateList:t=>{p&&p.connected&&(p.publish({destination:"/app/list/".concat(e),body:JSON.stringify(t)}),console.log("Sent update to WebSocket"))}})})})}}}]);
//# sourceMappingURL=632.ccb1bd9f.chunk.js.map