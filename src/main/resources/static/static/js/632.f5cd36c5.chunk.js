"use strict";(self.webpackChunklistig_react_ui=self.webpackChunklistig_react_ui||[]).push([[632],{6879:(e,t,i)=>{i.d(t,{A:()=>s});var n=i(9217);class s{constructor(){this.baseUrl=n.C1}async sendPost(e,t,i){const n=await fetch(this.baseUrl+e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+i},body:JSON.stringify(t)});if(!n.ok){console.log(await n.json());const e=await n.json();throw new Error(e)}return await n.json()}async sendPostNoLogin(e,t){const i=await fetch(this.baseUrl+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!i.ok){const e=await i.json();throw new Error(e)}return await i.json()}async sendGet(e,t){const i=await fetch(this.baseUrl+e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Basic "+t}});if(!i.ok)throw new Error(await i.json());return await i.json()}async sendGetNoAuth(e){const t=await fetch(this.baseUrl+e,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(await t.json());return await t.json()}async sendDelete(e,t,i){const n=await fetch(this.baseUrl+e,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Basic "+i},body:JSON.stringify(t)});if(!n.ok)throw new Error(await n.json());return await n.json()}}},2475:(e,t,i)=>{i.d(t,{A:()=>u});i(5043);var n=i(5721),s=i(1322),r=i(3851),o=i(6446),l=i(8734),a=i(7392),d=i(4208),c=i(579);const u=e=>{let{uList:t}=e;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(n.A,{children:t.items.map((e=>(0,c.jsxs)(s.Ay,{sx:{cursor:"pointer",border:"1px solid ",borderColor:"primary.darker",marginTop:"5px",borderRadius:"5px"},children:[(0,c.jsx)(r.A,{children:(0,c.jsx)(o.A,{})}),(0,c.jsx)(l.A,{primary:e.item,primaryTypographyProps:{fontSize:"18px"}}),(0,c.jsx)(a.A,{sx:{pointerEvents:"none"},edge:"end",children:(0,c.jsx)(d.A,{})})]},e.id)))})})}},8351:(e,t,i)=>{i.d(t,{A:()=>m});var n=i(5043),s=i(5721),r=i(1322),o=i(3851),l=i(6446),a=i(8734),d=i(7392),c=i(4208),u=i(6581),x=i(4109),h=i(9613),p=i(579);const m=e=>{let{uList:t,updateList:i,isPublic:m}=e;const{user:j}=(0,n.useContext)(h.c),[g,f]=(0,n.useState)((()=>!m&&(j.username===t.owner||t.editors.includes(j.username))));return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(s.A,{children:t.items.map((e=>{return(0,p.jsxs)(r.Ay,{sx:{cursor:"pointer",border:"1px solid ",borderColor:"primary.darker",marginTop:"5px",borderRadius:"5px"},onClick:()=>(e=>{if(g){const n=t.items.map((t=>t.id===e?{...t,itemStatus:"1"===t.itemStatus?"":"1"}:t));i({...t,items:n})}})(e.id),children:[(0,p.jsx)(o.A,{children:(0,p.jsx)(l.A,{children:(n=e.itemStatus,"1"===n?(0,p.jsx)(u.A,{sx:{color:"secondary.main"}}):(0,p.jsx)(x.A,{sx:{color:"secondary.main"}}))})}),(0,p.jsx)(a.A,{primary:e.item,primaryTypographyProps:{fontSize:"18px"}}),(0,p.jsx)(d.A,{sx:{pointerEvents:"none"},edge:"end",children:(0,p.jsx)(c.A,{})})]},e.id);var n}))})})}},5828:(e,t,i)=>{i.d(t,{A:()=>A});var n=i(5043),s=i(5721),r=i(1322),o=i(3851),l=i(8734),a=i(7392),d=i(35),c=i(6600),u=i(1906),x=i(5316),h=i(5146),p=i(9347),m=i(6485),j=i(2577),g=i(9613),f=i(579);const A=e=>{let{uList:t,updateList:i,isPublic:A}=e;const{user:b}=(0,n.useContext)(g.c),[y,v]=(0,n.useState)((()=>!A&&(b.username===t.owner||t.editors.includes(b.username)))),[w,C]=(0,n.useState)(!1),[k,L]=(0,n.useState)(""),[S,I]=(0,n.useState)(""),[E,R]=(0,n.useState)(!1);function F(e){""!==e&&window.open(e,"_blank","noopener,noreferrer")}return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.A,{children:t.items.map((e=>(0,f.jsxs)(r.Ay,{sx:{cursor:"pointer",border:"1px solid ",borderColor:"primary.darker",marginTop:"5px",borderRadius:"5px"},children:[(0,f.jsx)(o.A,{onClick:()=>F(e.itemStatus),children:""!==e.itemStatus&&(0,f.jsx)(m.A,{})}),(0,f.jsx)(l.A,{primary:e.item,primaryTypographyProps:{fontSize:"18px"},onClick:()=>F(e.itemStatus)}),(0,f.jsx)(a.A,{edge:"end",onClick:()=>function(e){L(e),I(e.itemStatus),C(!0)}(e),children:(0,f.jsx)(j.A,{})})]},e.id)))}),(0,f.jsxs)(d.A,{open:w,onClose:()=>{C(!1)},children:[(0,f.jsx)(c.A,{textAlign:"center",children:"Edit link"}),(0,f.jsx)("br",{}),""!==S&&(0,f.jsx)(u.A,{variant:"outlined",fullWidth:!0,onClick:async()=>{try{await navigator.clipboard.writeText(S),R(!0),setTimeout((()=>R(!1)),2e3)}catch(e){console.error("Failed to copy text: ",e)}},children:E?"Link Copied!":"Copy Link"}),(0,f.jsx)(x.A,{children:y?(0,f.jsx)(h.A,{label:"Edit Link",value:S,onChange:e=>I(e.target.value)}):(0,f.jsx)(h.A,{label:"Link",value:S})}),(0,f.jsxs)(p.A,{sx:{justifyContent:"center"},children:[(0,f.jsx)(u.A,{onClick:()=>{C(!1)},variant:"contained",children:"Close"}),y&&(0,f.jsx)(u.A,{onClick:()=>{!function(){const e=t.items.map((e=>e.id===k.id?{...e,itemStatus:S}:e));i({...t,items:e}),C(!1)}()},variant:"contained",children:"Save"})]})]})]})}},5704:(e,t,i)=>{i.d(t,{A:()=>o});i(5043);var n=i(6446),s=i(5865),r=i(579);const o=e=>{let{uList:t}=e;return(0,r.jsx)(r.Fragment,{children:(()=>{if(null!==t.listInfo.listDesc)return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(n.A,{sx:{marginBottom:1,gridRow:"1",gridColumn:"1 / 2",m:1,paddingLeft:2,paddingRight:2},children:(0,r.jsxs)(s.A,{fontSize:"large",children:[t.listInfo.listDesc,(0,r.jsx)("br",{})]})})})})()})}},524:(e,t,i)=>{i.d(t,{A:()=>w});var n=i(5043),s=i(7392),r=i(5721),o=i(1322),l=i(3851),a=i(8734),d=i(35),c=i(6600),u=i(5316),x=i(5146),h=i(9347),p=i(1906),m=i(6485),j=i(9613),g=i(6581),f=i(3968),A=i(4536),b=i(4109),y=i(852),v=i(579);const w=e=>{let{uList:t,updateList:i,isPublic:w}=e;const{user:C}=(0,n.useContext)(j.c),[k,L]=(0,n.useState)((()=>!w&&(C.username===t.owner||t.editors.includes(C.username)))),[S,I]=(0,n.useState)({}),E=e=>{I((t=>({...t,[e]:!t[e]})))},[R,F]=(0,n.useState)(!1),[P,T]=(0,n.useState)(""),[W,D]=(0,n.useState)("");function B(){return t.listInfo.hasLink}function O(e){if(t.listInfo.hasLink)return null!==e&&""!==e}function U(){return t.listInfo.hasComment}function z(e){if(null!==e.comment&&""!==e.comment)return!0}function N(e){return k?(0,v.jsx)(s.A,{onClick:()=>function(e){T(e),D(e.comment||""),F(!0)}(e),children:(0,v.jsx)(y.A,{})}):(0,v.jsx)(v.Fragment,{})}function G(e){return!0===t.listInfo.hasCheck&&e.checked}function V(e){return e.checked?(0,v.jsx)(g.A,{sx:{color:"primary.main"}}):(0,v.jsx)(b.A,{sx:{color:"primary.main"}})}return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(r.A,{children:t.items.map((e=>(0,v.jsxs)("div",{children:[(0,v.jsxs)(o.Ay,{sx:{cursor:"pointer",border:"1px solid ",borderColor:"primary.darker",marginTop:"5px",borderRadius:"5px",opacity:G(e)&&.5,textDecoration:(()=>{const t=G(e),i=O(e.link);return t&&i?"line-through underline":t?"line-through":i?"underline":"none"})()},children:[(0,v.jsx)(l.A,{children:U()?(0,v.jsx)(v.Fragment,{children:z(e)?(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(s.A,{onClick:()=>E(e.id),children:S[e.id]?(0,v.jsx)(A.A,{}):(0,v.jsx)(f.A,{})})}):(0,v.jsx)(v.Fragment,{children:N(e)})}):(0,v.jsx)(v.Fragment,{children:B()&&(0,v.jsx)(v.Fragment,{children:O(e.link)&&(0,v.jsx)(m.A,{})})})}),B&&(0,v.jsx)(v.Fragment,{children:U()&&(0,v.jsx)(v.Fragment,{children:O(e.link)&&(0,v.jsx)(m.A,{sx:{paddingRight:"5px"}})})}),(0,v.jsx)(a.A,{primary:e.item,primaryTypographyProps:{fontSize:"18px"},onClick:()=>{var t;O(t=e.link)&&window.open(t,"_blank","noopener,noreferrer")}}),t.listInfo.hasCheck&&(0,v.jsx)(s.A,{edge:"end",onClick:()=>(e=>{if(k){const n=t.items.map((t=>t.id===e?{...t,checked:!t.checked}:t));i({...t,items:n})}})(e.id),children:V(e)})]}),S[e.id]&&(0,v.jsxs)(o.Ay,{sx:{marginTop:"5px",padding:"10px",borderRadius:"5px"},children:[(0,v.jsx)(l.A,{children:N(e)}),(0,v.jsx)(a.A,{secondary:e.comment,secondaryTypographyProps:{fontSize:"14px",color:"text.secondary",align:"left",marginLeft:"10px"}})]})]},e.id)))}),(0,v.jsxs)(d.A,{sx:{"& .MuiDialog-paper":{width:"600px",maxWidth:"80%"}},open:R,onClose:()=>{F(!1)},children:[(0,v.jsx)(c.A,{textAlign:"center",children:"Edit Notes"}),(0,v.jsx)(u.A,{children:(0,v.jsx)(x.A,{inputProps:{maxLength:1e3},id:"outlined-multiline-flexible",label:"Notes",multiline:!0,rows:4,autoComplete:"off",variant:"outlined",value:W,onChange:e=>D(e.target.value),fullWidth:!0})}),(0,v.jsxs)(h.A,{sx:{justifyContent:"center"},children:[(0,v.jsx)(p.A,{onClick:()=>{F(!1)},variant:"contained",children:"Close"}),k&&(0,v.jsx)(p.A,{onClick:()=>{!function(){""===W&&E(P.id);const e=t.items.map((e=>e.id===P.id?{...e,comment:W}:e));i({...t,items:e}),F(!1)}()},variant:"contained",children:"Save"})]})]})]})}},9007:(e,t,i)=>{i.d(t,{A:()=>o});var n=i(5865),s=i(6446),r=(i(5043),i(579));const o=e=>{let{title:t}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(s.A,{sx:{paddingTop:2,paddingRight:5,paddingLeft:5},children:[(0,r.jsx)(n.A,{fontSize:"xx-large",sx:{fontFamily:"Garamond",color:"primary.main"},children:(0,r.jsx)("strong",{children:t})}),(0,r.jsx)("br",{})]})})}},7632:(e,t,i)=>{i.r(t),i.d(t,{default:()=>he});var n=i(5043),s=i(835),r=i(6446),o=i(1637),l=i(5865),a=i(9613),d=i(5081),c=i.n(d),u=i(7285),x=i(6879),h=i(7392),p=i(7555),m=i(3531),j=i(8351),g=i(2475),f=i(6893),A=i(5721),b=i(1322),y=i(635),v=i(8734),w=i(9409),C=i(3851),k=i(155),L=i(35),S=i(6600),I=i(5316),E=i(5146),R=i(1906),F=i(9347),P=i(2639),T=i(579);const W=new x.A,D=e=>{let{uList:t,updateList:i}=e;const{loginDetails:s}=(0,n.useContext)(a.c),[l,d]=(0,n.useState)("");(0,n.useEffect)((()=>{d("")}),[t]);const{user:c}=(0,n.useContext)(a.c),[u,x]=(0,n.useState)((()=>c.username===t.owner||t.editors.includes(c.username))),[p,m]=(0,n.useState)(!1),[j,g]=(0,n.useState)(!1),[f,D]=(0,n.useState)(""),[B,O]=(0,n.useState)(""),[U,z]=(0,n.useState)(""),[N,G]=(0,n.useState)(!1);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(A.A,{children:(0,T.jsx)(y.JY,{onDragEnd:e=>{if(!e.destination)return;const n=e.source.index,s=e.destination.index,r=[...t.items],[o]=r.splice(n,1);r.splice(s,0,o),r.forEach(((e,t)=>{e.itemOrder=t+1})),t.items=r,i(t)},children:(0,T.jsx)(y.gL,{droppableId:"items",children:e=>(0,T.jsxs)(r.A,{ref:e.innerRef,...e.droppableProps,children:[t.items.map(((e,t)=>(0,T.jsx)(y.sx,{index:t,draggableId:e.id+"",children:t=>(0,T.jsxs)(r.A,{sx:{display:"flex"},children:[(0,T.jsxs)(b.Ay,{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,sx:{cursor:"pointer",border:"1px solid ",borderColor:"primary.darker",marginTop:"5px",borderRadius:"5px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,T.jsx)(C.A,{children:(0,T.jsx)(r.A,{children:(0,T.jsx)(w.A,{})})}),(0,T.jsx)(v.A,{primary:e.item,primaryTypographyProps:{fontSize:"18px"}}),(0,T.jsx)(h.A,{edge:"end","aria-label":"edit",onClick:()=>function(e){D(e),z(e.link),O(e.item),m(!0)}(e),children:(0,T.jsx)(P.A,{})})]}),(0,T.jsx)(r.A,{onClick:()=>(async e=>{d(e);const t=await W.sendDelete("list/item",e,s);i(t)})(e),sx:{cursor:"pointer",marginTop:"5px",borderRadius:"5px",width:"60px",height:"58px",display:"flex",alignItems:"center",justifyContent:"center"},children:l===e?(0,T.jsx)(o.A,{}):(0,T.jsx)(h.A,{edge:"end","aria-label":"delete",children:(0,T.jsx)(k.A,{})})})]},e.id)},e.id))),e.placeholder]})})})}),(0,T.jsxs)(L.A,{open:p,onClose:()=>{m(!1)},children:[(0,T.jsx)(S.A,{textAlign:"center",children:"Edit Item"}),(0,T.jsxs)(I.A,{children:[(0,T.jsx)(E.A,{label:"Item",value:B,onChange:e=>O(e.target.value),sx:{marginY:"10px"},fullWidth:!0}),(0,T.jsx)("br",{}),("LINK"===t.listInfo.type||t.listInfo.hasLink)&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(E.A,{label:"Edit Link",value:U,onChange:e=>z(e.target.value),sx:{marginY:"10px"},fullWidth:!0}),""!==U&&(0,T.jsx)(R.A,{variant:"outlined",fullWidth:!0,onClick:async()=>{try{await navigator.clipboard.writeText(U),G(!0),setTimeout((()=>G(!1)),2e3)}catch(e){console.error("Failed to copy text: ",e)}},children:N?"Link Copied!":"Copy Link"}),(0,T.jsx)("br",{})]})]}),(0,T.jsxs)(F.A,{sx:{justifyContent:"center"},children:[(0,T.jsx)(R.A,{onClick:()=>{m(!1)},variant:"contained",children:"Close"}),(0,T.jsx)(R.A,{onClick:()=>{!function(){const e=t.items.map((e=>e.id===f.id?{...e,link:U,item:B}:e));i({...t,items:e}),m(!1)}()},variant:"contained",children:"Save"})]})]})]})};var B=i(2505);const O=e=>{let{uList:t,updateList:i}=e;const[s,l]=(0,n.useState)(""),[a,d]=(0,n.useState)(""),[c,u]=(0,n.useState)(""),[x,h]=(0,n.useState)(!1),p=(0,n.useRef)();(0,n.useEffect)((()=>{h(!1)}),[t]);function m(){return"LINK"===t.listInfo.type||(!0===t.listInfo.hasLink||void 0)}const j=()=>{if(""===s.trim())return void h(!1);let e=function(e,i){const n={listId:t.listInfo.id,item:e,itemOrder:i.items.length+1,link:a,comment:c};return{...i,items:[...i.items,n]}}(s,t);i(e),l(""),d(""),u(""),p.current.focus()};return(0,T.jsx)(T.Fragment,{children:(0,T.jsxs)("form",{onSubmit:e=>{e.preventDefault(),h(!0),j()},children:[(0,T.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",mt:2},children:[(0,T.jsxs)(r.A,{sx:{flex:1,display:"flex",flexDirection:"column"},children:[(0,T.jsx)(E.A,{inputProps:{maxLength:200},id:"new-item",autoComplete:"off",label:"Add to List",variant:"outlined",value:s,onChange:e=>l(e.target.value),fullWidth:!0,sx:{height:"56px"},inputRef:p,InputProps:{sx:{borderTopRightRadius:0,borderBottomRightRadius:0,"& .MuiOutlinedInput-notchedOutline":{borderTopRightRadius:0,borderBottomRightRadius:0},height:"56px",borderColor:"primary.darker"}}}),m()&&(0,T.jsx)(E.A,{inputProps:{maxLength:200},id:"new-item",label:"URL",autoComplete:"off",variant:"outlined",value:a,onChange:e=>d(e.target.value),fullWidth:!0,sx:{height:"56px"},InputProps:{sx:{borderTopRightRadius:0,borderBottomRightRadius:0,"& .MuiOutlinedInput-notchedOutline":{borderTopRightRadius:0,borderBottomRightRadius:0},height:"56px",borderColor:"primary.darker"}}})]}),x?(0,T.jsx)(o.A,{}):(0,T.jsx)(R.A,{type:"submit",variant:"outlined",sx:{borderTopLeftRadius:0,borderBottomLeftRadius:0,minWidth:"56px",height:m()?"112px":"56px"},children:(0,T.jsx)(B.A,{})})]}),t.listInfo.hasComment&&(0,T.jsx)(E.A,{inputProps:{maxLength:1e3},id:"outlined-multiline-flexible",label:"Notes",multiline:!0,rows:4,autoComplete:"off",variant:"outlined",value:c,onChange:e=>u(e.target.value),fullWidth:!0,InputProps:{sx:{borderTopRightRadius:0,borderBottomRightRadius:0,"& .MuiOutlinedInput-notchedOutline":{borderTopRightRadius:0,borderBottomRightRadius:0},borderColor:"primary.darker"}}})]})})};var U=i(9007),z=i(3321),N=i(6990),G=i(8082),V=i(5293),M=i(3217);const J=e=>{let{list:t,updateCopy:i}=e;const{user:s}=(0,n.useContext)(a.c);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("br",{}),(0,T.jsx)(E.A,{inputProps:{maxLength:100},id:"list-title",label:"Title",variant:"outlined",value:t.listInfo.listName,onChange:e=>(e=>{const n={...t,listInfo:{...t.listInfo,listName:e}};i(n)})(e.target.value),fullWidth:!0,sx:{marginBottom:1}}),(0,T.jsx)(E.A,{inputProps:{maxLength:100},id:"list-desc",label:"Description (optional)",variant:"outlined",value:t.listInfo.listDesc,onChange:e=>(e=>{const n={...t,listInfo:{...t.listInfo,listDesc:e}};i(n)})(e.target.value),fullWidth:!0,sx:{marginBottom:1}}),(0,T.jsxs)(r.A,{sx:{display:"flex",flexDirection:"column",marginBottom:1},children:[(0,T.jsx)(l.A,{fontSize:"large",align:"left",padding:"8px",paddingTop:"18px",color:"secondary.main",children:"List functions"}),(0,T.jsx)(V.A,{control:(0,T.jsx)(M.A,{checked:t.listInfo.hasCheck,onChange:e=>(e=>{const n={...t,listInfo:{...t.listInfo,hasCheck:e}};i(n)})(e.target.checked),color:"primary"}),label:"Enable CheckList"}),(0,T.jsx)(V.A,{control:(0,T.jsx)(M.A,{checked:t.listInfo.hasLink,onChange:e=>(e=>{const n={...t,listInfo:{...t.listInfo,hasLink:e}};i(n)})(e.target.checked),color:"primary"}),label:"Enable Links"}),(0,T.jsx)(V.A,{control:(0,T.jsx)(M.A,{checked:t.listInfo.hasComment,onChange:e=>(e=>{const n={...t,listInfo:{...t.listInfo,hasComment:e}};i(n)})(e.target.checked),color:"primary"}),label:"Enable Notes"})]})]})};var _=i(9217);const K=new x.A,$=e=>{let{uList:t,updateList:i}=e;const{loginDetails:d}=(0,n.useContext)(a.c),[c,u]=(0,n.useState)(!1),[x,h]=(0,n.useState)(""),[p,m]=(0,n.useState)(!1),[j,g]=(0,n.useState)(!1),f=(0,s.Zp)();(0,n.useEffect)((()=>{u(null!==t.listInfo.uuid),function(){if(null===t.listInfo.uuid)return"";h(_.Ec+t.listInfo.uuid)}(),g(!1)}),[t]);return(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(r.A,{sx:{maxWidth:300},children:c?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(l.A,{children:["List is ",(0,T.jsx)("strong",{children:"Public"})]}),(0,T.jsx)("br",{}),(0,T.jsx)(l.A,{children:"Share the link with anyone to let them view your list."}),(0,T.jsx)("br",{}),(0,T.jsx)(R.A,{sx:{m:1},variant:"outlined",fullWidth:!0,onClick:async()=>{try{await navigator.clipboard.writeText(x),m(!0),setTimeout((()=>m(!1)),2e3)}catch(e){console.error("Failed to copy text: ",e)}},children:p?"Link Copied!":"Copy Link"}),(0,T.jsx)(R.A,{sx:{m:1},variant:"outlined",fullWidth:!0,onClick:()=>{f(`/web/public/${t.listInfo.uuid}`)},children:"Go to Public List"}),j?(0,T.jsx)(o.A,{}):(0,T.jsx)(R.A,{sx:{m:1},variant:"outlined",fullWidth:!0,onClick:async()=>{g(!0);const e=await K.sendPost("list/makePrivate",t,d);i(e)},children:"Make private"})]}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(l.A,{children:["List is ",(0,T.jsx)("strong",{children:"Private"}),(0,T.jsx)("br",{})," Only you and those you invite are able to access the list."]}),(0,T.jsx)("br",{}),j?(0,T.jsx)(o.A,{}):(0,T.jsx)(R.A,{sx:{m:1},variant:"outlined",fullWidth:!0,onClick:async()=>{g(!0);const e=await K.sendPost("list/makePublic",t,d);i(e)},children:"Make public"}),(0,T.jsx)("br",{}),(0,T.jsx)(l.A,{children:"Make the list public to be able to share your list with anyone who has the link to it."})]})})})};var H=i(3193),Y=i(9285),Z=i(3766),q=i(6605),Q=i(710),X=i(3471);const ee=new x.A;function te(){return null}const ie=e=>{let{list:t,updateCopy:i}=e;const{loginDetails:s}=(0,n.useContext)(a.c),[o,d]=(0,n.useState)(""),[c,u]=(0,n.useState)("VIEWER"),[x,p]=(0,n.useState)(!1),[m,j]=(0,n.useState)(""),g=t.editors||[],f=t.viewers||[],A=(e,n)=>{let s=[...g],r=[...f];"EDITOR"===n?(r=r.filter((t=>t!==e)),s.includes(e)||s.push(e)):"VIEWER"===n&&(s=s.filter((t=>t!==e)),r.includes(e)||r.push(e));const o={...t,editors:s,viewers:r};i(o)},b=e=>{const n={...t,editors:g.filter((t=>t!==e)),viewers:f.filter((t=>t!==e))};i(n)};return(0,T.jsxs)(T.Fragment,{children:[g.length>0||f.length>0?(0,T.jsxs)(T.Fragment,{children:[g.map(((e,t)=>(0,T.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",marginBottom:1},children:[(0,T.jsx)(l.A,{sx:{flexGrow:1,marginLeft:2},children:e}),(0,T.jsx)(H.A,{sx:{width:100,marginRight:2},children:(0,T.jsxs)(Y.A,{value:"EDITOR",onChange:t=>A(e,t.target.value),children:[(0,T.jsx)(N.A,{value:"EDITOR",children:"Editor"}),(0,T.jsx)(N.A,{value:"VIEWER",children:"Viewer"})]})}),(0,T.jsx)(h.A,{onClick:()=>b(e),color:"error",children:(0,T.jsx)(X.A,{})})]},t))),f.map(((e,t)=>(0,T.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",marginBottom:1},children:[(0,T.jsx)(l.A,{sx:{flexGrow:1,marginLeft:2},children:e}),(0,T.jsx)(H.A,{sx:{width:100,marginRight:2},children:(0,T.jsxs)(Y.A,{value:"VIEWER",onChange:t=>A(e,t.target.value),children:[(0,T.jsx)(N.A,{value:"EDITOR",children:"Editor"}),(0,T.jsx)(N.A,{value:"VIEWER",children:"Viewer"})]})}),(0,T.jsx)(h.A,{onClick:()=>b(e),color:"error",children:(0,T.jsx)(X.A,{})})]},t)))]}):(0,T.jsx)(l.A,{sx:{marginLeft:2},children:"List is currently private."}),(0,T.jsx)("br",{}),(0,T.jsxs)(Z.A,{children:[(0,T.jsx)(q.A,{id:"panel-header","aria-controls":"panel-content",children:(0,T.jsx)(r.A,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:(0,T.jsx)(l.A,{fontSize:"large",children:"Add User"})})}),(0,T.jsxs)(Q.A,{children:[(0,T.jsx)(H.A,{sx:{maxWidth:350,marginBottom:2},children:(0,T.jsx)(E.A,{inputProps:{maxLength:50},id:"new-item",label:"Username",variant:"outlined",autoComplete:"off",value:o,onChange:e=>d(e.target.value),fullWidth:!0})}),(0,T.jsxs)(r.A,{sx:{display:"flex",justifyContent:"space-between",width:"100%",maxWidth:350},children:[(0,T.jsx)(H.A,{sx:{width:"48%"},children:(0,T.jsxs)(Y.A,{value:c,onChange:e=>{u(e.target.value)},inputProps:{name:"role",id:"uncontrolled-native"},sx:{width:"100%"},children:[(0,T.jsx)(N.A,{value:"VIEWER",children:"Viewer"}),(0,T.jsx)(N.A,{value:"EDITOR",children:"Editor"})]})}),x?(0,T.jsx)(te,{}):(0,T.jsx)(R.A,{onClick:async()=>{p(!0),j("");try{if(!0===await ee.sendPost("user/userExists",{username:o},s)){const e={...t,editors:"EDITOR"===c?[...g,o]:g,viewers:"VIEWER"===c?[...f,o]:f};d(""),u("VIEWER"),i(e)}else j("The username does not exist.")}catch(e){j("An error occurred while checking the username.")}finally{p(!1)}},variant:"solid",sx:{height:"56px",width:"48%"},children:"Add User"})]}),(0,T.jsx)("br",{}),(0,T.jsxs)(l.A,{color:"error",children:[" ",m]})]})]})]})},ne=e=>{let{uList:t}=e;return(0,T.jsx)(T.Fragment,{children:(0,T.jsxs)(r.A,{p:2,children:[(0,T.jsxs)(r.A,{sx:{display:"flex"},children:[(0,T.jsx)(l.A,{fontSize:"large",sx:{fontFamily:"Garamond"},minWidth:100,children:(0,T.jsx)("strong",{children:"Owner: "})}),(0,T.jsx)(l.A,{fontSize:"large",children:t.owner})]}),!t.editors||0!==t.editors.length&&(0,T.jsxs)(r.A,{sx:{display:"flex"},children:[(0,T.jsx)(l.A,{fontSize:"large",sx:{fontFamily:"Garamond"},minWidth:100,children:(0,T.jsx)("strong",{children:"Editors: "})}),(0,T.jsx)(r.A,{children:t.editors.map((e=>(0,T.jsx)(l.A,{fontSize:"large",children:e},e)))})]}),!t.viewers||t.viewers.length>0&&(0,T.jsxs)(r.A,{sx:{display:"flex"},children:[(0,T.jsx)(l.A,{fontSize:"large",sx:{fontFamily:"Garamond"},minWidth:100,children:(0,T.jsx)("strong",{children:"Viewers: "})}),(0,T.jsx)(r.A,{children:t.viewers.map((e=>(0,T.jsx)(l.A,{fontSize:"large",children:e},e)))})]})]})})},se=e=>{let{uList:t,updateList:i}=e;const[s,r]=(0,n.useState)(""),[o,a]=(0,n.useState)(0);(0,n.useRef)();return(0,n.useEffect)((()=>{}),[]),(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(l.A,{fontSize:"small",sx:{paddingBottom:1},children:"Separate items by new line."}),(0,T.jsx)(E.A,{inputProps:{maxLength:200},autoComplete:"off",id:"bulk-add",label:"Bulk add",variant:"outlined",value:s,onChange:e=>r(e.target.value),fullWidth:!0,multiline:!0,minRows:3,InputProps:{sx:{height:"112px",borderColor:"primary.darker"}}}),(0,T.jsx)(R.A,{variant:"outlined",p:1,fullWidth:!0,onClick:function(){let e={...t};const n=s.split(/\r?\n/);let o=0;n.forEach((i=>{""!==i.trim()&&(e=function(e,i){const n={listId:t.listInfo.id,item:e,itemOrder:i.items.length+1};return{...i,items:[...i.items,n]}}(i,e),o++)})),i(e),r(""),a(o)},children:"Add items"}),o>0&&(0,T.jsxs)(l.A,{children:[" ",o," items added to list."]})]})},re=new x.A,oe=e=>{let{uList:t,updateList:i,dialog:r,setDialog:o,option:d}=e;const{loginDetails:c,user:u}=(0,n.useContext)(a.c),[x,h]=(0,n.useState)({...t}),[p,m]=(0,n.useState)(!0),j=(0,s.Zp)();function g(){o(!1)}async function f(){await re.sendDelete("list",t.listInfo.id,c),o(!1),j("/web/overview")}async function A(){await re.sendPost("list/removeUser",{user:u.username,listId:t.listInfo.id},c),o(!1),j("/web/overview")}return(0,n.useEffect)((()=>{m(["manageUsers","editListInfo"].includes(d))}),[d]),(0,T.jsx)(T.Fragment,{children:(0,T.jsxs)(L.A,{open:r,onClose:g,children:[(0,T.jsx)(S.A,{textAlign:"center",children:function(){switch(d){case"manageUsers":return"Manage Users";case"editListInfo":return"Edit Info";case"deleteList":return"Delete List";case"leaveList":return"Leave List";case"userInfo":return"Users";case"bulkAdd":return"Add Multiple Items";case"publicSettings":return"Public List Settings"}}()}),(0,T.jsx)(I.A,{children:function(){switch(d){case"manageUsers":return(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(ie,{list:x,updateCopy:h})});case"editListInfo":return(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(J,{list:x,updateCopy:h})});case"deleteList":return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(l.A,{textAlign:"center",p:1,children:["Warning: ",(0,T.jsx)("br",{}),"Deleting a list cannot be reversed."]}),(0,T.jsx)(R.A,{onClick:f,variant:"contained",sx:{padding:2},color:"warning",fullWidth:!0,children:"Delete list"})]});case"leaveList":return(0,T.jsxs)(T.Fragment,{children:[" ",(0,T.jsxs)(l.A,{textAlign:"center",p:1,children:["Warning: ",(0,T.jsx)("br",{}),"If you want to come back, the owner will have to add you again."]}),(0,T.jsx)(R.A,{onClick:A,variant:"contained",sx:{padding:2},color:"warning",fullWidth:!0,children:"Leave list"})]});case"userInfo":return(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(ne,{uList:x})});case"bulkAdd":return(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(se,{uList:t,updateList:i})});case"publicSettings":return(0,T.jsx)(T.Fragment,{children:(0,T.jsx)($,{uList:t,updateList:i})})}}()}),(0,T.jsxs)(F.A,{sx:{justifyContent:"center"},children:[(0,T.jsx)(R.A,{onClick:g,variant:"contained",children:"Close"}),p&&(0,T.jsx)(R.A,{onClick:function(){"manageUsers"===d&&function(){let e=[],i=[];t.editors!==x.editors&&(e=t.editors.filter((e=>!x.editors.includes(e)))),t.viewers!==x.viewers&&(i=t.viewers.filter((e=>!x.viewers.includes(e)))),e.concat(i).forEach((e=>{re.sendPost("list/removeUser",{user:e,listId:t.listInfo.id},c)}))}(),i(x),o(!1)},variant:"contained",children:"Save Changes"})]})]})})},le=e=>{let{uList:t,updateList:i}=e;const{user:r}=(0,n.useContext)(a.c),o=(0,s.Zp)(),[l,d]=(0,n.useState)(null),[c,u]=(0,n.useState)(!1),[x,p]=(0,n.useState)(null),[m,j]=(0,n.useState)(!1);(0,n.useEffect)((()=>{u(null!==t.listInfo.uuid)}),[t]);const g=()=>d(null),f=e=>{p(e),j(!0),g()};return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(h.A,{sx:{position:"sticky",top:0,right:0,color:"primary.lighter",fontSize:"large"},id:"basic-button","aria-controls":Boolean(l)?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":Boolean(l)?"true":void 0,onClick:e=>d(e.currentTarget),children:(0,T.jsx)(G.A,{})}),(0,T.jsx)(z.A,{id:"basic-menu",anchorEl:l,open:Boolean(l),onClose:g,MenuListProps:{"aria-labelledby":"basic-button"},children:(()=>{const e=[{text:"User Information",action:()=>f("userInfo"),roles:["viewers","editors"]},{text:"Bulk Add Items",action:()=>f("bulkAdd"),roles:["owner","editors"]},{text:"Edit List Information",action:()=>f("editListInfo"),roles:["owner","editors"]},{text:"Go to Public Page",action:()=>o(`/web/public/${t.listInfo.uuid}`),roles:["viewers","editors"],condition:c},{text:"Leave List",action:()=>f("leaveList"),roles:["viewers","editors"]},{text:"Handle Users",action:()=>f("manageUsers"),roles:["owner"]},{text:"Edit Public Settings",action:()=>f("publicSettings"),roles:["owner"]},{text:"Delete List",action:()=>f("deleteList"),roles:["owner"]}],i=e.filter((e=>e.roles.includes("owner"))),n=e.filter((e=>e.roles.includes("editors"))),s=e.filter((e=>e.roles.includes("viewers")));return t.owner===r.username?i:null!==t.editors&&t.editors.includes(r.username)?n:null!==t.viewers&&t.viewers.includes(r.username)?s:[]})().map((e=>{let{text:t,action:i,condition:n=!0}=e;return n&&(0,T.jsx)(N.A,{onClick:i,children:t},t)}))}),(0,T.jsx)(oe,{uList:t,updateList:i,dialog:m,setDialog:j,option:x})]})};var ae=i(5704),de=i(5828),ce=i(524);const ue=e=>{let{uList:t,updateList:i}=e;const{user:s}=(0,n.useContext)(a.c),[o,d]=(0,n.useState)(!0),[c,u]=(0,n.useState)((()=>s.username===t.owner||t.editors.includes(s.username)));return(0,T.jsx)(T.Fragment,{children:(0,T.jsxs)(r.A,{maxWidth:750,sx:{mx:"auto"},variant:"contained",children:[(0,T.jsxs)(r.A,{children:[(0,T.jsx)(U.A,{title:t.listInfo.listName}),(0,T.jsx)(ae.A,{uList:t}),(0,T.jsx)(l.A,{sx:{gridRow:"2",gridColumn:"1 / 3",textAlign:"left",p:1},children:(()=>{if(t.owner===s.username&&0===t.editors.length&&0===t.viewers.length)return(0,T.jsx)(T.Fragment,{});{const e=[...t.editors,...t.viewers].join(", "),i=t.owner+", "+e;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(f.A,{sx:{verticalAlign:"middle",mr:1}}),i]})}})()})]}),(0,T.jsxs)(r.A,{sx:{border:"1px solid ",borderColor:"primary.darker"},children:[(0,T.jsxs)(r.A,{sx:{backgroundColor:"primary.darker",display:"flex",justifyContent:"flex-end"},children:[c&&(0,T.jsx)(h.A,{variant:"outlined",onClick:()=>{d(!o)},children:o?(0,T.jsx)(p.A,{sx:{color:"primary.lighter"}}):(0,T.jsx)(m.A,{sx:{color:"primary.lighter"}})}),(0,T.jsx)(le,{uList:t,updateList:i})]}),o?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(r.A,{children:function(e){switch(e.listInfo.type){case"CHECK":return(0,T.jsx)(j.A,{uList:t,updateList:i,isPublic:!1});case"LINK":return(0,T.jsx)(de.A,{uList:t,updateList:i,isPublic:!1});case"BASIC":return(0,T.jsx)(g.A,{uList:t});default:return(0,T.jsx)(ce.A,{uList:t,updateList:i,isPublic:!1})}}(t)}),c&&(0,T.jsx)(O,{uList:t,updateList:i})]}):(0,T.jsx)(D,{uList:t,updateList:i})]})]})})},xe=new x.A,he=()=>{const{id:e}=(0,s.g)(),{loginDetails:t}=(0,n.useContext)(a.c),[i,d]=(0,n.useState)(!0),[x,h]=(0,n.useState)(null),[p,m]=(0,n.useState)(null),[j,g]=(0,n.useState)(!1);(0,n.useEffect)((()=>{(async()=>{try{const i=await xe.sendGet(`list/${e}`,t);h(i)}catch(i){g(!0)}finally{d(!1)}})();const i=new(c())(_.yv),n=new u.K({webSocketFactory:()=>i,onConnect:()=>{console.log("Connected to WebSocket"),n.subscribe(`/topic/list/${e}`,(e=>{const t=JSON.parse(e.body);h(t)}))},onStompError:e=>{console.error("Broker reported error: "+e.headers.message),console.error("Additional details: "+e.body)}});return n.activate(),m(n),()=>{n&&n.connected&&n.deactivate()}}),[e,t]);return(0,T.jsx)(T.Fragment,{children:i?(0,T.jsxs)(r.A,{children:[(0,T.jsx)(o.A,{}),(0,T.jsx)(l.A,{children:"Loading List"})]}):(0,T.jsx)(T.Fragment,{children:j?(0,T.jsx)(l.A,{children:"Unable to load list."}):(0,T.jsx)(ue,{uList:x,updateList:t=>{p&&p.connected&&(p.publish({destination:`/app/list/${e}`,body:JSON.stringify(t)}),console.log("Sent update to WebSocket"))}})})})}}}]);
//# sourceMappingURL=632.f5cd36c5.chunk.js.map