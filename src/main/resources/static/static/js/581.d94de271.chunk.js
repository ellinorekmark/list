"use strict";(self.webpackChunklistig_react_ui=self.webpackChunklistig_react_ui||[]).push([[581],{6879:(e,t,i)=>{i.d(t,{A:()=>n});var s=i(9217);class n{constructor(){this.baseUrl=s.C1}async sendPost(e,t,i){const s=await fetch(this.baseUrl+e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+i},body:JSON.stringify(t)});if(!s.ok){console.log(await s.json());const e=await s.json();throw new Error(e)}return await s.json()}async sendPostNoLogin(e,t){const i=await fetch(this.baseUrl+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!i.ok){const e=await i.json();throw new Error(e)}return await i.json()}async sendGet(e,t){const i=await fetch(this.baseUrl+e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Basic "+t}});if(!i.ok)throw new Error(await i.json());return await i.json()}async sendGetNoAuth(e){const t=await fetch(this.baseUrl+e,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(await t.json());return await t.json()}async sendDelete(e,t,i){const s=await fetch(this.baseUrl+e,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Basic "+i},body:JSON.stringify(t)});if(!s.ok)throw new Error(await s.json());return await s.json()}}},2475:(e,t,i)=>{i.d(t,{A:()=>u});i(5043);var s=i(5721),n=i(1322),r=i(3851),o=i(6446),l=i(8734),a=i(7392),d=i(4208),c=i(579);const u=e=>{let{uList:t}=e;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.A,{children:t.items.map((e=>(0,c.jsxs)(n.Ay,{sx:{cursor:"pointer",border:"1px solid ",borderColor:"primary.darker",marginTop:"5px",borderRadius:"5px"},children:[(0,c.jsx)(r.A,{children:(0,c.jsx)(o.A,{})}),(0,c.jsx)(l.A,{primary:e.item,primaryTypographyProps:{fontSize:"18px"}}),(0,c.jsx)(a.A,{edge:"end",children:(0,c.jsx)(d.A,{})})]},e.id)))})})}},8351:(e,t,i)=>{i.d(t,{A:()=>j});var s=i(5043),n=i(5721),r=i(1322),o=i(3851),l=i(6446),a=i(8734),d=i(7392),c=i(4208),u=i(6581),x=i(4109),h=i(9613),p=i(579);const j=e=>{let{uList:t,updateList:i}=e;const{user:j}=(0,s.useContext)(h.c),[m,g]=(0,s.useState)((()=>j.username===t.owner||t.editors.includes(j.username)));return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(n.A,{children:t.items.map((e=>{return(0,p.jsxs)(r.Ay,{sx:{cursor:"pointer",border:"1px solid ",borderColor:"primary.darker",marginTop:"5px",borderRadius:"5px"},onClick:()=>(e=>{if(m){const s=t.items.map((t=>t.id===e?{...t,itemStatus:"1"===t.itemStatus?"":"1"}:t));i({...t,items:s})}})(e.id),children:[(0,p.jsx)(o.A,{children:(0,p.jsx)(l.A,{children:(s=e.itemStatus,"1"===s?(0,p.jsx)(u.A,{sx:{color:"secondary.main"}}):(0,p.jsx)(x.A,{sx:{color:"secondary.main"}}))})}),(0,p.jsx)(a.A,{primary:e.item,primaryTypographyProps:{fontSize:"18px"}}),(0,p.jsx)(d.A,{edge:"end",children:(0,p.jsx)(c.A,{})})]},e.id);var s}))})})}},5704:(e,t,i)=>{i.d(t,{A:()=>o});i(5043);var s=i(6446),n=i(5865),r=i(579);const o=e=>{let{uList:t}=e;return(0,r.jsx)(r.Fragment,{children:(()=>{if(null!==t.listInfo.listDesc)return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.A,{sx:{marginBottom:1,gridRow:"1",gridColumn:"1 / 2",m:1,paddingLeft:2,paddingRight:2},children:(0,r.jsxs)(n.A,{fontSize:"large",children:[t.listInfo.listDesc,(0,r.jsx)("br",{})]})})})})()})}},9007:(e,t,i)=>{i.d(t,{A:()=>o});var s=i(5865),n=i(6446),r=(i(5043),i(579));const o=e=>{let{title:t}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(n.A,{sx:{paddingTop:2,paddingRight:5,paddingLeft:5},children:[(0,r.jsx)(s.A,{fontSize:"xx-large",sx:{fontFamily:"Garamond",color:"primary.main"},children:(0,r.jsx)("strong",{children:t})}),(0,r.jsx)("br",{})]})})}},581:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ue});var s=i(5043),n=i(835),r=i(6446),o=i(1637),l=i(5865),a=i(9613),d=i(5081),c=i.n(d),u=i(7285),x=i(6879),h=i(7392),p=i(7555),j=i(3531),m=i(8351),g=i(2475),f=i(6893),A=i(5721),y=i(1322),w=i(635),b=i(8734),v=i(9409),L=i(3851),C=i(155),S=i(579);const I=new x.A,k=e=>{let{uList:t,updateList:i}=e;const{loginDetails:n}=(0,s.useContext)(a.c),[l,d]=(0,s.useState)("");(0,s.useEffect)((()=>{d("")}),[t]);return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(A.A,{children:(0,S.jsx)(w.JY,{onDragEnd:e=>{if(!e.destination)return;const s=e.source.index,n=e.destination.index,r=[...t.items],[o]=r.splice(s,1);r.splice(n,0,o),r.forEach(((e,t)=>{e.itemOrder=t+1})),t.items=r,i(t)},children:(0,S.jsx)(w.gL,{droppableId:"items",children:e=>(0,S.jsxs)(r.A,{ref:e.innerRef,...e.droppableProps,children:[t.items.map(((e,t)=>(0,S.jsx)(w.sx,{index:t,draggableId:e.id+"",children:t=>(0,S.jsxs)(y.Ay,{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,sx:{cursor:"pointer",border:"1px solid ",borderColor:"primary.darker",marginTop:"5px",borderRadius:"5px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,S.jsx)(L.A,{children:(0,S.jsx)(r.A,{children:(0,S.jsx)(v.A,{})})}),(0,S.jsx)(b.A,{primary:e.item,primaryTypographyProps:{fontSize:"18px"}}),l===e?(0,S.jsx)(o.A,{}):(0,S.jsx)(h.A,{edge:"end","aria-label":"delete",onClick:()=>(async e=>{d(e);const t=await I.sendDelete("list/item",e,n);i(t)})(e),children:(0,S.jsx)(C.A,{})})]})},e.id))),e.placeholder]})})})})})};var E=i(5146),R=i(1906),F=i(2505);const P=e=>{let{uList:t,updateList:i}=e;const[n,a]=(0,s.useState)(""),[d,c]=(0,s.useState)(""),[u,x]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1),j=(0,s.useRef)();(0,s.useEffect)((()=>{x(!1)}),[t]);const m=()=>{if(""===n.trim())return;let e=function(e,i){const s={listId:t.listInfo.id,item:e,itemOrder:i.items.length+1,itemStatus:d};return{...i,items:[...i.items,s]}}(n,t);i(e),a(""),c(""),p(!1),j.current.focus()};return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("form",{onSubmit:e=>{e.preventDefault(),"LINK"!==t.listInfo.type||""!==d?(x(!0),m()):p(!0)},children:[(0,S.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",mt:2},children:[(0,S.jsxs)(r.A,{sx:{flex:1,display:"flex",flexDirection:"column"},children:[(0,S.jsx)(E.A,{inputProps:{maxLength:200},id:"new-item",label:"Add to List",variant:"outlined",value:n,onChange:e=>a(e.target.value),fullWidth:!0,sx:{height:"56px"},inputRef:j,InputProps:{sx:{borderTopRightRadius:0,borderBottomRightRadius:0,"& .MuiOutlinedInput-notchedOutline":{borderTopRightRadius:0,borderBottomRightRadius:0},height:"56px",borderColor:"primary.darker"}}}),"LINK"===t.listInfo.type&&(0,S.jsx)(E.A,{inputProps:{maxLength:200},id:"new-item",label:"URL",variant:"outlined",value:d,onChange:e=>c(e.target.value),fullWidth:!0,sx:{height:"56px"},inputRef:j,InputProps:{sx:{borderTopRightRadius:0,borderBottomRightRadius:0,"& .MuiOutlinedInput-notchedOutline":{borderTopRightRadius:0,borderBottomRightRadius:0},height:"56px",borderColor:"primary.darker"}}})]}),u?(0,S.jsx)(o.A,{}):(0,S.jsx)(R.A,{type:"submit",variant:"outlined",sx:{borderTopLeftRadius:0,borderBottomLeftRadius:0,minWidth:"56px",height:"LINK"===t.listInfo.type?"112px":"56px"},children:(0,S.jsx)(F.A,{})})]}),h&&(0,S.jsx)(l.A,{color:"warning",children:"Please enter a URL for your link"})]})})};var T=i(9007),W=i(3321),D=i(6990),B=i(8082),U=i(35),O=i(6600),z=i(5316),N=i(9347),G=i(3193),V=i(9285);const K=e=>{let{list:t,updateCopy:i}=e;const{user:n}=(0,s.useContext)(a.c);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("br",{}),(0,S.jsx)(E.A,{inputProps:{maxLength:100},id:"list-title",label:"Title",variant:"outlined",value:t.listInfo.listName,onChange:e=>(e=>{const s={...t,listInfo:{...t.listInfo,listName:e}};i(s)})(e.target.value),fullWidth:!0,sx:{marginBottom:1}}),(0,S.jsx)(E.A,{inputProps:{maxLength:100},id:"list-desc",label:"Description (optional)",variant:"outlined",value:t.listInfo.listDesc,onChange:e=>(e=>{const s={...t,listInfo:{...t.listInfo,listDesc:e}};i(s)})(e.target.value),fullWidth:!0,sx:{marginBottom:1}}),(0,S.jsxs)(G.A,{children:[(0,S.jsx)(l.A,{children:"List type:"}),"LINK"===t.listInfo.type?(0,S.jsx)(l.A,{children:"Linked"}):(0,S.jsxs)(V.A,{value:t.listInfo.type,onChange:e=>{const s={...t,listInfo:{...t.listInfo,type:e.target.value}};i(s)},sx:{width:200,marginBottom:2},children:[(0,S.jsx)(D.A,{value:"BASIC",children:"Normal"}),(0,S.jsx)(D.A,{value:"CHECK",children:"Checklist"})]})]})]})};var M=i(9217);const J=new x.A,_=e=>{let{uList:t,updateList:i}=e;const{loginDetails:d}=(0,s.useContext)(a.c),[c,u]=(0,s.useState)(!1),[x,h]=(0,s.useState)(""),[p,j]=(0,s.useState)(!1),[m,g]=(0,s.useState)(!1),f=(0,n.Zp)();(0,s.useEffect)((()=>{u(null!==t.listInfo.uuid),function(){if(null===t.listInfo.uuid)return"";h(M.Ec+t.listInfo.uuid)}(),g(!1)}),[t]);return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(r.A,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",children:c?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(l.A,{children:["List is ",(0,S.jsx)("strong",{children:"Public"})]}),(0,S.jsx)("br",{}),(0,S.jsx)(l.A,{children:"Share the link with anyone to let them view your list."}),(0,S.jsx)("br",{}),(0,S.jsx)(R.A,{sx:{m:1},variant:"outlined",fullWidth:!0,onClick:async()=>{try{await navigator.clipboard.writeText(x),j(!0),setTimeout((()=>j(!1)),2e3)}catch(e){console.error("Failed to copy text: ",e)}},children:p?"Link Copied!":"Copy Link"}),(0,S.jsx)(R.A,{sx:{m:1},variant:"outlined",fullWidth:!0,onClick:()=>{f("/web/public/".concat(t.listInfo.uuid))},children:"Go to Public List"}),m?(0,S.jsx)(o.A,{}):(0,S.jsx)(R.A,{sx:{m:1},variant:"outlined",fullWidth:!0,onClick:async()=>{g(!0);const e=await J.sendPost("list/makePrivate",t,d);i(e)},children:"Make private"})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(l.A,{children:["List is ",(0,S.jsx)("strong",{children:"Private"}),(0,S.jsx)("br",{})," Only you and those you invite are able to access the list."]}),(0,S.jsx)("br",{}),m?(0,S.jsx)(o.A,{}):(0,S.jsx)(R.A,{sx:{m:1},variant:"outlined",fullWidth:!0,onClick:async()=>{g(!0);const e=await J.sendPost("list/makePublic",t,d);i(e)},children:"Make public"}),(0,S.jsx)("br",{}),(0,S.jsx)(l.A,{children:"Make the list public to be able to share your list with anyone who has the link to it."})]})})})};var H=i(3766),Z=i(6605),Y=i(710),q=i(3471);const Q=new x.A;function X(){return null}const $=e=>{let{list:t,updateCopy:i}=e;const{loginDetails:n}=(0,s.useContext)(a.c),[o,d]=(0,s.useState)(""),[c,u]=(0,s.useState)("VIEWER"),[x,p]=(0,s.useState)(!1),[j,m]=(0,s.useState)(""),g=t.editors||[],f=t.viewers||[],A=(e,s)=>{let n=[...g],r=[...f];"EDITOR"===s?(r=r.filter((t=>t!==e)),n.includes(e)||n.push(e)):"VIEWER"===s&&(n=n.filter((t=>t!==e)),r.includes(e)||r.push(e));const o={...t,editors:n,viewers:r};i(o)},y=e=>{const s={...t,editors:g.filter((t=>t!==e)),viewers:f.filter((t=>t!==e))};i(s)};return(0,S.jsxs)(S.Fragment,{children:[g.length>0||f.length>0?(0,S.jsxs)(S.Fragment,{children:[g.map(((e,t)=>(0,S.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",marginBottom:1},children:[(0,S.jsx)(l.A,{sx:{flexGrow:1,marginLeft:2},children:e}),(0,S.jsx)(G.A,{sx:{width:100,marginRight:2},children:(0,S.jsxs)(V.A,{value:"EDITOR",onChange:t=>A(e,t.target.value),children:[(0,S.jsx)(D.A,{value:"EDITOR",children:"Editor"}),(0,S.jsx)(D.A,{value:"VIEWER",children:"Viewer"})]})}),(0,S.jsx)(h.A,{onClick:()=>y(e),color:"error",children:(0,S.jsx)(q.A,{})})]},t))),f.map(((e,t)=>(0,S.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",marginBottom:1},children:[(0,S.jsx)(l.A,{sx:{flexGrow:1,marginLeft:2},children:e}),(0,S.jsx)(G.A,{sx:{width:100,marginRight:2},children:(0,S.jsxs)(V.A,{value:"VIEWER",onChange:t=>A(e,t.target.value),children:[(0,S.jsx)(D.A,{value:"EDITOR",children:"Editor"}),(0,S.jsx)(D.A,{value:"VIEWER",children:"Viewer"})]})}),(0,S.jsx)(h.A,{onClick:()=>y(e),color:"error",children:(0,S.jsx)(q.A,{})})]},t)))]}):(0,S.jsx)(l.A,{sx:{marginLeft:2},children:"List is currently private."}),(0,S.jsx)("br",{}),(0,S.jsxs)(H.A,{children:[(0,S.jsx)(Z.A,{id:"panel-header","aria-controls":"panel-content",children:(0,S.jsx)(r.A,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:(0,S.jsx)(l.A,{fontSize:"large",children:"Add User"})})}),(0,S.jsxs)(Y.A,{children:[(0,S.jsx)(G.A,{sx:{maxWidth:350,marginBottom:2},children:(0,S.jsx)(E.A,{inputProps:{maxLength:50},id:"new-item",label:"Username",variant:"outlined",value:o,onChange:e=>d(e.target.value),fullWidth:!0})}),(0,S.jsxs)(r.A,{sx:{display:"flex",justifyContent:"space-between",width:"100%",maxWidth:350},children:[(0,S.jsx)(G.A,{sx:{width:"48%"},children:(0,S.jsxs)(V.A,{value:c,onChange:e=>{u(e.target.value)},inputProps:{name:"role",id:"uncontrolled-native"},sx:{width:"100%"},children:[(0,S.jsx)(D.A,{value:"VIEWER",children:"Viewer"}),(0,S.jsx)(D.A,{value:"EDITOR",children:"Editor"})]})}),x?(0,S.jsx)(X,{}):(0,S.jsx)(R.A,{onClick:async()=>{p(!0),m("");try{if(!0===await Q.sendPost("user/userExists",{username:o},n)){const e={...t,editors:"EDITOR"===c?[...g,o]:g,viewers:"VIEWER"===c?[...f,o]:f};d(""),u("VIEWER"),i(e)}else m("The username does not exist.")}catch(e){m("An error occurred while checking the username.")}finally{p(!1)}},variant:"outlined",sx:{height:"56px",width:"48%"},children:"Add User"})]}),(0,S.jsx)("br",{}),(0,S.jsxs)(l.A,{color:"error",children:[" ",j]})]})]})]})},ee=e=>{let{uList:t}=e;return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(r.A,{p:2,children:[(0,S.jsxs)(r.A,{sx:{display:"flex"},children:[(0,S.jsx)(l.A,{fontSize:"large",sx:{fontFamily:"Garamond"},minWidth:100,children:(0,S.jsx)("strong",{children:"Owner: "})}),(0,S.jsx)(l.A,{fontSize:"large",children:t.owner})]}),!t.editors||0!==t.editors.length&&(0,S.jsxs)(r.A,{sx:{display:"flex"},children:[(0,S.jsx)(l.A,{fontSize:"large",sx:{fontFamily:"Garamond"},minWidth:100,children:(0,S.jsx)("strong",{children:"Editors: "})}),(0,S.jsx)(r.A,{children:t.editors.map((e=>(0,S.jsx)(l.A,{fontSize:"large",children:e},e)))})]}),!t.viewers||t.viewers.length>0&&(0,S.jsxs)(r.A,{sx:{display:"flex"},children:[(0,S.jsx)(l.A,{fontSize:"large",sx:{fontFamily:"Garamond"},minWidth:100,children:(0,S.jsx)("strong",{children:"Viewers: "})}),(0,S.jsx)(r.A,{children:t.viewers.map((e=>(0,S.jsx)(l.A,{fontSize:"large",children:e},e)))})]})]})})},te=e=>{let{uList:t,updateList:i}=e;const[n,r]=(0,s.useState)(""),[o,a]=(0,s.useState)(0);(0,s.useRef)();return(0,s.useEffect)((()=>{}),[]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(l.A,{fontSize:"small",sx:{paddingBottom:1},children:"Separate items by new line."}),(0,S.jsx)(E.A,{inputProps:{maxLength:200},id:"bulk-add",label:"Bulk add",variant:"outlined",value:n,onChange:e=>r(e.target.value),fullWidth:!0,multiline:!0,minRows:3,InputProps:{sx:{height:"112px",borderColor:"primary.darker"}}}),(0,S.jsx)(R.A,{variant:"outlined",p:1,fullWidth:!0,onClick:function(){let e={...t};const s=n.split(/\r?\n/);let o=0;s.forEach((i=>{""!==i.trim()&&(e=function(e,i){const s={listId:t.listInfo.id,item:e,itemOrder:i.items.length+1};return{...i,items:[...i.items,s]}}(i,e),o++)})),i(e),r(""),a(o)},children:"Add items"}),o>0&&(0,S.jsxs)(l.A,{children:[" ",o," items added to list."]})]})},ie=new x.A,se=e=>{let{uList:t,updateList:i,dialog:r,setDialog:o,option:d}=e;const{loginDetails:c,user:u}=(0,s.useContext)(a.c),[x,h]=(0,s.useState)({...t}),[p,j]=(0,s.useState)(!0),m=(0,n.Zp)();function g(){o(!1)}async function f(){await ie.sendDelete("list",t.listInfo.id,c),o(!1),m("/web/overview")}async function A(){await ie.sendPost("list/removeUser",{user:u.username,listId:t.listInfo.id},c),o(!1),m("/web/overview")}return(0,s.useEffect)((()=>{j(["manageUsers","editListInfo"].includes(d))}),[d]),(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(U.A,{open:r,onClose:g,children:[(0,S.jsx)(O.A,{textAlign:"center",children:function(){switch(d){case"manageUsers":return"Manage Users";case"editListInfo":return"Edit Info";case"deleteList":return"Delete List";case"leaveList":return"Leave List";case"userInfo":return"Users";case"bulkAdd":return"Add Multiple Items";case"publicSettings":return"Public List Settings"}}()}),(0,S.jsx)(z.A,{children:function(){switch(d){case"manageUsers":return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)($,{list:x,updateCopy:h})});case"editListInfo":return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(K,{list:x,updateCopy:h})});case"deleteList":return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(l.A,{textAlign:"center",p:1,children:["Warning: ",(0,S.jsx)("br",{}),"Deleting a list cannot be reversed."]}),(0,S.jsx)(R.A,{onClick:f,variant:"contained",sx:{padding:2},color:"warning",fullWidth:!0,children:"Delete list"})]});case"leaveList":return(0,S.jsxs)(S.Fragment,{children:[" ",(0,S.jsxs)(l.A,{textAlign:"center",p:1,children:["Warning: ",(0,S.jsx)("br",{}),"If you want to come back, the owner will have to add you again."]}),(0,S.jsx)(R.A,{onClick:A,variant:"contained",sx:{padding:2},color:"warning",fullWidth:!0,children:"Leave list"})]});case"userInfo":return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(ee,{uList:x})});case"bulkAdd":return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(te,{uList:t,updateList:i})});case"publicSettings":return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(_,{uList:t,updateList:i})})}}()}),(0,S.jsxs)(N.A,{sx:{justifyContent:"center"},children:[(0,S.jsx)(R.A,{onClick:g,variant:"contained",children:"Close"}),p&&(0,S.jsx)(R.A,{onClick:function(){"manageUsers"===d&&function(){let e=[],i=[];t.editors!==x.editors&&(e=t.editors.filter((e=>!x.editors.includes(e)))),t.viewers!==x.viewers&&(i=t.viewers.filter((e=>!x.viewers.includes(e)))),e.concat(i).forEach((e=>{ie.sendPost("list/removeUser",{user:e,listId:t.listInfo.id},c)}))}(),i(x),o(!1)},variant:"contained",children:"Save Changes"})]})]})})},ne=e=>{let{uList:t,updateList:i}=e;const{user:r}=(0,s.useContext)(a.c),o=(0,n.Zp)(),[l,d]=(0,s.useState)(null),[c,u]=(0,s.useState)(!1),[x,p]=(0,s.useState)(null),[j,m]=(0,s.useState)(!1);(0,s.useEffect)((()=>{u(null!==t.listInfo.uuid)}),[t]);const g=()=>d(null),f=e=>{p(e),m(!0),g()};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(h.A,{sx:{position:"sticky",top:0,right:0,color:"primary.lighter",fontSize:"large"},id:"basic-button","aria-controls":Boolean(l)?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":Boolean(l)?"true":void 0,onClick:e=>d(e.currentTarget),children:(0,S.jsx)(B.A,{})}),(0,S.jsx)(W.A,{id:"basic-menu",anchorEl:l,open:Boolean(l),onClose:g,MenuListProps:{"aria-labelledby":"basic-button"},children:(()=>{const e=[{text:"User Information",action:()=>f("userInfo"),roles:["viewers"]},{text:"Bulk Add Items",action:()=>f("bulkAdd"),roles:["owner","editors"]},{text:"Edit List Information",action:()=>f("editListInfo"),roles:["owner","editors"]},{text:"Go to Public Page",action:()=>o("/web/public/".concat(t.listInfo.uuid)),roles:["viewers","editors"],condition:c},{text:"Leave List",action:()=>f("leaveList"),roles:["viewers","editors"]},{text:"Handle Users",action:()=>f("manageUsers"),roles:["owner"]},{text:"Edit Public Settings",action:()=>f("publicSettings"),roles:["owner"]},{text:"Delete List",action:()=>f("deleteList"),roles:["owner"]}],i=e.filter((e=>e.roles.includes("owner"))),s=e.filter((e=>e.roles.includes("editors"))),n=e.filter((e=>e.roles.includes("viewers")));return t.owner===r.username?i:null!==t.editors&&t.editors.includes(r.username)?s:null!==t.viewers&&t.viewers.includes(r.username)?n:[]})().map((e=>{let{text:t,action:i,condition:s=!0}=e;return s&&(0,S.jsx)(D.A,{onClick:i,children:t},t)}))}),(0,S.jsx)(se,{uList:t,updateList:i,dialog:j,setDialog:m,option:x})]})};var re=i(5704),oe=i(6485),le=i(2577);const ae=e=>{let{uList:t,updateList:i}=e;const{user:n}=(0,s.useContext)(a.c),[r,o]=(0,s.useState)((()=>n.username===t.owner||t.editors.includes(n.username))),[l,d]=(0,s.useState)(!1),[c,u]=(0,s.useState)(""),[x,p]=(0,s.useState)(""),[j,m]=(0,s.useState)(!1);function g(e){window.open(e,"_blank","noopener,noreferrer")}return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(A.A,{children:t.items.map((e=>(0,S.jsxs)(y.Ay,{sx:{cursor:"pointer",border:"1px solid ",borderColor:"primary.darker",marginTop:"5px",borderRadius:"5px"},children:[(0,S.jsx)(L.A,{onClick:()=>g(e.itemStatus),children:(0,S.jsx)(oe.A,{})}),(0,S.jsx)(b.A,{primary:e.item,primaryTypographyProps:{fontSize:"18px"},onClick:()=>g(e.itemStatus)}),(0,S.jsx)(h.A,{edge:"end",onClick:()=>function(e){u(e),p(e.itemStatus),d(!0)}(e),children:(0,S.jsx)(le.A,{})})]},e.id)))}),(0,S.jsxs)(U.A,{open:l,onClose:()=>{d(!1)},children:[(0,S.jsx)(O.A,{textAlign:"center",children:"Edit link"}),(0,S.jsx)("br",{}),(0,S.jsx)(R.A,{variant:"outlined",fullWidth:!0,onClick:async()=>{try{await navigator.clipboard.writeText(x),m(!0),setTimeout((()=>m(!1)),2e3)}catch(e){console.error("Failed to copy text: ",e)}},children:j?"Link Copied!":"Copy Link"}),"               ",(0,S.jsx)(z.A,{children:r?(0,S.jsx)(E.A,{label:"Edit Link",value:x,onChange:e=>p(e.target.value)}):(0,S.jsx)(E.A,{label:"Link",value:x})}),(0,S.jsxs)(N.A,{sx:{justifyContent:"center"},children:[(0,S.jsx)(R.A,{onClick:()=>{d(!1)},variant:"contained",children:"Close"}),r&&(0,S.jsx)(R.A,{onClick:()=>{!function(){const e=t.items.map((e=>e.id===c.id?{...e,itemStatus:x}:e));i({...t,items:e}),d(!1)}()},variant:"contained",children:"Save"})]})]})]})},de=e=>{let{uList:t,updateList:i}=e;const{user:n}=(0,s.useContext)(a.c),[o,d]=(0,s.useState)(!0),[c,u]=(0,s.useState)((()=>n.username===t.owner||t.editors.includes(n.username)));return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(r.A,{maxWidth:750,sx:{mx:"auto"},variant:"contained",children:[(0,S.jsxs)(r.A,{children:[(0,S.jsx)(T.A,{title:t.listInfo.listName}),(0,S.jsx)(re.A,{uList:t}),(0,S.jsx)(l.A,{sx:{gridRow:"2",gridColumn:"1 / 3",textAlign:"left",p:1},children:(()=>{if(t.owner===n.username&&0===t.editors.length&&0===t.viewers.length)return(0,S.jsx)(S.Fragment,{});{const e=[...t.editors,...t.viewers].join(", "),i=t.owner+", "+e;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(f.A,{sx:{verticalAlign:"middle",mr:1}}),i]})}})()})]}),(0,S.jsxs)(r.A,{sx:{border:"1px solid ",borderColor:"primary.darker"},children:[(0,S.jsxs)(r.A,{sx:{backgroundColor:"primary.darker",display:"flex",justifyContent:"flex-end"},children:[c&&(0,S.jsx)(h.A,{variant:"outlined",onClick:()=>{d(!o)},children:o?(0,S.jsx)(p.A,{sx:{color:"primary.lighter"}}):(0,S.jsx)(j.A,{sx:{color:"primary.lighter"}})}),(0,S.jsx)(ne,{uList:t,updateList:i})]}),o?(0,S.jsx)(r.A,{children:function(e){switch(e.listInfo.type){case"CHECK":return(0,S.jsx)(m.A,{uList:t,updateList:i});case"LINK":return(0,S.jsx)(ae,{uList:t,updateList:i});default:return(0,S.jsx)(g.A,{uList:t})}}(t)}):(0,S.jsx)(k,{uList:t,updateList:i}),c&&(0,S.jsx)(P,{uList:t,updateList:i})]})]})})},ce=new x.A,ue=()=>{const{id:e}=(0,n.g)(),{loginDetails:t}=(0,s.useContext)(a.c),[i,d]=(0,s.useState)(!0),[x,h]=(0,s.useState)(null),[p,j]=(0,s.useState)(null),[m,g]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(async()=>{try{const i=await ce.sendGet("list/".concat(e),t);h(i)}catch(i){g(!0)}finally{d(!1)}})();const i=new(c())(M.yv),s=new u.K({webSocketFactory:()=>i,onConnect:()=>{console.log("Connected to WebSocket"),s.subscribe("/topic/list/".concat(e),(e=>{const t=JSON.parse(e.body);h(t)}))},onStompError:e=>{console.error("Broker reported error: "+e.headers.message),console.error("Additional details: "+e.body)}});return s.activate(),j(s),()=>{s&&s.connected&&s.deactivate()}}),[e,t]);return(0,S.jsx)(S.Fragment,{children:i?(0,S.jsxs)(r.A,{children:[(0,S.jsx)(o.A,{}),(0,S.jsx)(l.A,{children:"Loading List"})]}):(0,S.jsx)(S.Fragment,{children:m?(0,S.jsx)(l.A,{children:"Unable to load list."}):(0,S.jsx)(de,{uList:x,updateList:t=>{p&&p.connected&&(p.publish({destination:"/app/list/".concat(e),body:JSON.stringify(t)}),console.log("Sent update to WebSocket"))}})})})}}}]);
//# sourceMappingURL=581.d94de271.chunk.js.map