"use strict";(self.webpackChunklistig_react_ui=self.webpackChunklistig_react_ui||[]).push([[179],{6879:(e,t,s)=>{s.d(t,{A:()=>n});var r=s(9217);class n{constructor(){this.baseUrl=r.C1}async sendPost(e,t,s){const r=await fetch(this.baseUrl+e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+s},body:JSON.stringify(t)});if(!r.ok){console.log(await r.json());const e=await r.json();throw new Error(e)}return await r.json()}async sendPostNoLogin(e,t){const s=await fetch(this.baseUrl+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){const e=await s.json();throw new Error(e)}return await s.json()}async sendGet(e,t){const s=await fetch(this.baseUrl+e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Basic "+t}});if(!s.ok)throw new Error(await s.json());return await s.json()}async sendGetNoAuth(e){const t=await fetch(this.baseUrl+e,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(await t.json());return await t.json()}async sendDelete(e,t,s){const r=await fetch(this.baseUrl+e,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Basic "+s},body:JSON.stringify(t)});if(!r.ok)throw new Error(await r.json());return await r.json()}}},9007:(e,t,s)=>{s.d(t,{A:()=>o});var r=s(5865),n=s(6446),a=(s(5043),s(579));const o=e=>{let{title:t}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(n.A,{sx:{paddingTop:2,paddingRight:5,paddingLeft:5},children:[(0,a.jsx)(r.A,{fontSize:"xx-large",sx:{fontFamily:"Garamond",color:"primary.main"},children:(0,a.jsx)("strong",{children:t})}),(0,a.jsx)("br",{})]})})}},4179:(e,t,s)=>{s.r(t),s.d(t,{default:()=>A});var r=s(5043),n=s(1906),a=s(9613),o=s(835),i=s(6446),l=s(5865),d=s(9007),c=s(6890),h=s(3766),u=s(6605),x=s(710),m=s(5146),j=s(1637),w=s(6879),p=s(579);const f=new w.A,g=()=>{const{loginDetails:e,user:t,saveUser:s}=(0,r.useContext)(a.c),[o,d]=(0,r.useState)(""),[c,w]=(0,r.useState)(""),[g,A]=(0,r.useState)(""),[y,b]=(0,r.useState)(!1),[C,S]=(0,r.useState)(!1),[v,k]=(0,r.useState)(!1),[T,E]=(0,r.useState)(!1),[P,U]=(0,r.useState)(!1);return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(i.A,{children:(0,p.jsxs)(h.A,{sx:{mx:"auto",mt:2,border:"1px solid",borderColor:"primary.darker",borderRadius:2},children:[(0,p.jsx)(u.A,{children:(0,p.jsx)(i.A,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:(0,p.jsx)(l.A,{children:"Change password"})})}),(0,p.jsxs)(x.A,{children:[P&&(0,p.jsx)(l.A,{color:"success",children:"Password has been changed."}),(0,p.jsx)(m.A,{fullWidth:!0,id:"old-password",label:"Current Password",type:"password",variant:"outlined",margin:"normal",value:o,onChange:e=>d(e.target.value)}),C&&(0,p.jsx)(l.A,{color:"error",children:"Old password is incorrect."}),(0,p.jsx)(m.A,{fullWidth:!0,id:"new-password",label:"New Password",type:"password",variant:"outlined",margin:"normal",value:c,onChange:e=>w(e.target.value)}),(0,p.jsx)(m.A,{fullWidth:!0,id:"password-confirm",label:"Confirm Password",type:"password",variant:"outlined",margin:"normal",value:g,onChange:e=>A(e.target.value)}),v&&(0,p.jsx)(l.A,{color:"error",children:"Passwords don't match."}),y?(0,p.jsx)(i.A,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,p.jsx)(j.A,{})}):(0,p.jsx)(n.A,{fullWidth:!0,variant:"outlined",sx:{mt:1,p:1},onClick:async function(){if(b(!0),k(!1),S(!1),E(!1),btoa(t.username+":"+o)!==e)S(!0);else if(c!==g)k(!0);else try{const r=await f.sendPost("user/newPassword",{password:c},e);s(t.username,c,r),U(!0),w(""),d(""),A("")}catch(r){E(!0)}b(!1)},children:"Change password"})]})]})})})},A=()=>{const{user:e,logout:t}=(0,r.useContext)(a.c),{theme:s,toggleTheme:h}=(0,r.useContext)(c.D),[u,x]=(0,r.useState)(""),m=(0,o.Zp)(),j=new Date(e.memberSince);(0,r.useEffect)((()=>{x(j.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}))}),[s,h]);return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(i.A,{maxWidth:300,sx:{mx:"auto"},children:[(0,p.jsxs)(i.A,{sx:{paddingTop:2},children:[(0,p.jsx)(d.A,{title:"Profile"}),(0,p.jsx)(n.A,{variant:"outlined",sx:{mt:1,p:1},onClick:h,children:s}),(0,p.jsxs)(i.A,{sx:{width:300,mx:"auto",mt:2,border:"1px solid",borderColor:"primary.darker",borderRadius:2},children:[(0,p.jsx)(l.A,{fontSize:"large",sx:{fontFamily:"Garamond"},children:"Username:"}),(0,p.jsx)(l.A,{sx:{marginBottom:1},children:e.username}),(0,p.jsx)(l.A,{fontSize:"large",sx:{fontFamily:"Garamond"},children:"Email:"}),(0,p.jsx)(l.A,{sx:{marginBottom:1},children:e.email}),(0,p.jsx)(l.A,{fontSize:"large",sx:{fontFamily:"Garamond"},children:"Member since:"}),(0,p.jsx)(l.A,{sx:{marginBottom:1},children:u})]})]}),(0,p.jsxs)(i.A,{sx:{width:300,mx:"auto",mt:2},children:[(0,p.jsx)(n.A,{fullWidth:!0,variant:"outlined",sx:{mt:1,p:1},onClick:async()=>{t(),m("/")},children:"Logout"}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)(g,{})]})]})})}}}]);
//# sourceMappingURL=179.b93e24da.chunk.js.map